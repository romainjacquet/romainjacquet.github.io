<!doctype html>
<html lang="en" itemscope itemtype="http://schema.org/Person">
<head>
            <meta charset="utf-8">
        <!-- Site Meta Data -->
        <title>The limitation of mounting google drive with nautilus</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="Romain JACQUET">

        <link rel="shortcut icon" href="">

        <!-- schema.org -->
        <meta itemprop="name" content="Deep in the system">
        <meta itemprop="image" content="">
        <meta itemprop="description" content="">

        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
        <!-- Style Meta Data -->
        <link rel="stylesheet" href="https://romainjacquet.github.io/theme/css/style.css" type="text/css"/>
        <link rel="stylesheet" href="https://romainjacquet.github.io/theme/css/pygments.css" type="text/css"/>

        <!-- Feed Meta Data -->
            <link href="https://romainjacquet.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
                  title="Deep in the system ATOM Feed"/>

        <!-- Twitter Feed -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="">
        <meta name="twitter:image" content="">

    <meta name="twitter:creator" content="">
    <meta name="twitter:url" content="https://romainjacquet.github.io/the-limitation-of-mounting-google-drive-with-nautilus.html">
    <meta name="twitter:title" content="Deep in the system ~ The limitation of mounting google drive with nautilus">
    <meta name="twitter:description" content="using google drive with nautilus mount have some serious limitations">

    <!-- Facebook Meta Data -->
    <meta property="og:title" content="Deep in the system ~ The limitation of mounting google drive with nautilus"/>
    <meta property="og:description" content="using google drive with nautilus mount have some serious limitations"/>
    <meta property="og:image" content=""/>
</head>

<body>
<!-- Sidebar -->
<aside>
    <!--<center><a href="https://romainjacquet.github.io"><img id="avatar" src=""></a></center>-->
    <h1>Deep in the system</h1>
        <p>Unix, sysadmin, devops, CI/CD</p>
    <br>


    <nav class="nav">
        <ul class="list-bare">

                <li><a class="nav__link" href="/">Blog entry</a></li>

                <li><a class="nav__link" href="https://romainjacquet.github.io/pages/about.html">About</a></li>
                <li><a class="nav__link" href="https://romainjacquet.github.io/pages/links.html">Links</a></li>

        </ul>
    </nav>

    <p class="social">
                <a href="https://www.linkedin.com/in/jacquet-romain-493049141/?locale=en_US" target="_blank"><img
                        src="https://romainjacquet.github.io/theme/images/icons/linkedin.png"></a>
                <a href="https://github.com/romainjacquet" target="_blank"><img
                        src="https://romainjacquet.github.io/theme/images/icons/github.png"></a>
                <a href="mailto:romainjacquet@free.fr" target="_blank"><img
                        src="https://romainjacquet.github.io/theme/images/icons/mail.png"></a>
            <a href="https://romainjacquet.github.io/feeds/all.atom.xml" rel="alternate">
                <img src="https://romainjacquet.github.io/theme/images/icons/rss.png"></a>
    </p>

        <h2>Categories</h2>
        <ul class="navbar">
                <li><a
                        href="https://romainjacquet.github.io/category/business.html">business</a></li>
                <li><a
                        href="https://romainjacquet.github.io/category/cicd.html">ci/cd</a></li>
                <li><a
                        href="https://romainjacquet.github.io/category/development.html">development</a></li>
                <li><a
                        href="https://romainjacquet.github.io/category/gis.html">gis</a></li>
                <li class="active"><a
                        href="https://romainjacquet.github.io/category/misc.html">misc</a></li>
                <li><a
                        href="https://romainjacquet.github.io/category/sysadmin.html">sysadmin</a></li>
        </ul>

        <h2 class="blog_roll_link"><br/>BLOGROLLS</h2>
        <ul class="navbar">
                <li><a href="http://getpelican.com/">Pelican</a></li>
                <li><a href="http://python.org/">Python.org</a></li>
                <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
        </ul>

</aside>

<!-- Content -->
<article>
    <section id="content">
        <article>
            <h2 class="post_title post_detail"><a href="https://romainjacquet.github.io/the-limitation-of-mounting-google-drive-with-nautilus.html" rel="bookmark"
                                                  title="Permalink to The limitation of mounting google drive with nautilus">The limitation of mounting google drive with nautilus</a></h2>
            <div class="entry-content blog-post">
                <p>The generalization of the cloud storage comes with a lot of promises and
I really like the possibility to access to my personnal files from everywhere:
web, laptop, personnal computer, ...
With my Android smartphone, it's a native feature. With my Ubuntu the feature is
recent and there are serious limitations.</p>
<h1>Mounting google drive with Nautilus</h1>
<p>Years ago I was using <a href="https://rclone.org/">rclone</a> to access to my google drive 
files. Rclone have really nice 
<a href="https://rclone.org/commands/rclone_mount/">mount</a> feature. But I finally
give up because there is no simple way to automate the login. You always
have difficulties to renew the token.
Here come the nautilus feature that allow you to set oneline account. It's
available from the gnome-control-center.</p>
<p><img alt="nautilus_browser" src="https://romainjacquet.github.io/images/oneline_accounts.png">
<img alt="nautilus_config" src="https://romainjacquet.github.io/images/nautilus_oneline.png"></p>
<p>Once configured you can access to your google drive files. But I quicky realized that a lot of 
applications didn't work if the files are located on the drive. Gnumeric, gedit are
working but <a href="https://keepassxc.org/">keepassxc</a> or <a href="https://www.vim.org/">vim</a> 
doesn't work at all. With keepassxc it sometimes results in data corruption! With vim
the file is correctly displayed but saving the file failed. Even if the <code>nobackup</code> option,
some strange errors appeared.
<img alt="nautilus_config" src="https://romainjacquet.github.io/images/vim_error.png"></p>
<h1>Under the hood</h1>
<p>Nautilus is using a dedicated library named <a href="https://developer.gnome.org/gio/">gio</a> that 
provide all the features to
access to remote drives like google. The official gio description tells 
<strong>provide an API that is so good that developers prefer it over raw POSIX calls</strong>! I was a little bit surprized 
when I read this :-).
The <a href="https://developer.gnome.org/gio/stable/gio.html">gio command</a> allows us 
to manipulate the filesystem from the command line using the gio primitives. Comparing the output
of gio's commands to the standard unix commands (ls, cat) is meaningfull. 
We can understand how gio transform I/O to display the content in nautilus.</p>
<div class="highlight"><pre><span></span><code>$ ls 
17lXzXGnhfA89w39PitPdtblkoOW8t8rA  1HnbYPHAwbchlu1pCMnRS-qxRQtfs4ULO  1LJ9W3ZzmfVMyzE09abGOIswXwdjwI8x2
$ gio list -d
mytext2.txt
kpwd
simpsons
$ gio cat mytext2.txt
toto
titi
tata
tutu
</code></pre></div>

<h1>Why some applications work and other don't work</h1>
<ul>
<li>If the application use the standard POSIX functions like <code>open</code>, <code>read</code>, <code>write</code> and manipulate files through
plain-old file descriptors it will not work.</li>
<li>If the application use the gio library and the gio abstractions like <code>GFile</code>, <code>GFileInfo</code>, <code>GInputStream</code> it will
work. When using <code>open</code> directly on the file exposed by gio mount it will break the file because open is not 
aware that it is a network share. And some attributes like 'standard::display-name' are lost when performing IOs.
<strong>From Nautilus, if you open a file with an application that don't use gio you could corrupt or lost the file</strong>!</li>
</ul>
<h1>the future?</h1>
<p>I can't imagine that all applications will use gio in the future. Gio is intended for Gnome application not for
all the application. </p>
<ul>
<li>Is it possible to have a native support for Google Drive in the future? I mean that you can access without any
additionnal library like gio or KIO.</li>
<li>Is it possible for gio to intercept POSIX calls and transform them into GIO call?</li>
</ul>
<p>Not sure because this is complex. But it could be a better user experience.</p>
            </div>
            <div class="post_list">
                <span>By </span>
                <a href="https://romainjacquet.github.io/author/romain-jacquet.html">@Romain JACQUET</a>
                <span> in </span>
                <span class="post_category"><a href="https://romainjacquet.github.io/category/misc.html" rel="bookmark"
                                               title="Permalink to misc">[ misc ]</a></span>
                <span class="post_date">sam. 17 avril 2021</span>
                <div><span>Tags : </span>
                </div>

                <div class="entry-social">
                    <span class="twitter"><a target="_blank" rel="nofollow"
                                             onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;"
                                             title="Twitter"
                                             href="https://twitter.com/share?url=https://romainjacquet.github.io/the-limitation-of-mounting-google-drive-with-nautilus.html&text=The limitation of mounting google drive with nautilus&via="><img
                            src="https://romainjacquet.github.io/theme/images/icons/twitter-s.png"></a></span>

                    <span class="gplus"><a target="_blank" title="Google +"
                                           href="https://plus.google.com/share?url=https://romainjacquet.github.io/the-limitation-of-mounting-google-drive-with-nautilus.html&hl=fr"
                                           rel="nofollow"
                                           onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://romainjacquet.github.io/theme/images/icons/google-s.png"></a></span>

                    <span class="facebook"><a target="_blank" title="Facebook" rel="nofollow"
                                              onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;"
                                              href="https://www.facebook.com/sharer.php?u=https://romainjacquet.github.io/the-limitation-of-mounting-google-drive-with-nautilus.html&t=The limitation of mounting google drive with nautilus"><img
                            src="https://romainjacquet.github.io/theme/images/icons/facebook-s.png"></a></span>

                    <a target="_blank" title="Linkedin"
                       href="https://www.linkedin.com/shareArticle?mini=true&url=https://romainjacquet.github.io/the-limitation-of-mounting-google-drive-with-nautilus.html&title=The limitation of mounting google drive with nautilus"
                       rel="nofollow"
                       onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;"><img
                            src="https://romainjacquet.github.io/theme/images/icons/linkedin-s.png"></a>

                    <span class="mail"><a
                            href="mailto:?subject=The limitation of mounting google drive with nautilus&amp;body=Viens découvrir un article à propos de [The limitation of mounting google drive with nautilus] sur le site de Romain JACQUET. https://romainjacquet.github.io/the-limitation-of-mounting-google-drive-with-nautilus.html"
                            title="Share by Email" target="_blank"><img
                            src="https://romainjacquet.github.io/theme/images/icons/mail-s.png"></a></span>
                </div>
            </div>
        </article>
    </section>
</article>

<!-- Footer -->
    <footer>
        <p>
            <a href="http://getpelican.com/">Pelican</a> theme
            based on <a href="https://github.com/parbhat/pelican-blue">Pelican-Blue</a> by <a
                href="https://parbhatpuri.com/">@parbhat</a> with minor changes.
        </p>
    </footer>


</body>
</html>