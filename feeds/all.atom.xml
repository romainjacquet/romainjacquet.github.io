<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Deep in the system</title><link href="https://romainjacquet.github.io/" rel="alternate"></link><link href="https://romainjacquet.github.io/feeds/all.atom.xml" rel="self"></link><id>https://romainjacquet.github.io/</id><updated>2021-04-24T22:13:00+02:00</updated><entry><title>the different way of mounting Google drive with your Ubuntu</title><link href="https://romainjacquet.github.io/the-different-way-of-mounting-google-drive-with-your-ubuntu.html" rel="alternate"></link><published>2021-04-24T22:13:00+02:00</published><updated>2021-04-24T22:13:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2021-04-24:/the-different-way-of-mounting-google-drive-with-your-ubuntu.html</id><summary type="html">&lt;p&gt;be a little disappointed with Google drive mount&lt;/p&gt;</summary><content type="html">&lt;p&gt;As I explained it in my &lt;a href="https://romainjacquet.github.io/the-limitation-of-mounting-google-drive-with-nautilus.html"&gt;previous blog post&lt;/a&gt;, using 
the built-in feature of gnome to mount Google drive have some serious limitations. Here
I describe all the solutions I have tried. &lt;/p&gt;
&lt;h1&gt;Context&lt;/h1&gt;
&lt;p&gt;The native solution provided by the GNOME and KDE environments rely on dedicated libraries to wrap the &lt;code&gt;I/Os&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/KDE/kio"&gt;KIO&lt;/a&gt;  for KDE&lt;/li&gt;
&lt;li&gt;&lt;a href="https://developer.gnome.org/gio/"&gt;gio&lt;/a&gt; for GNOME&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is the same idea for the two libraries, it provides a superset of &lt;code&gt;I/Os&lt;/code&gt; functions that make easier &lt;code&gt;I/Os&lt;/code&gt; on
remote target accessible via HTTP/FTP. Or any other protocols if you write the corresponding extension. The 
goal is to display remote file storage in your window manager, transparent for the end-user.&lt;/p&gt;
&lt;p&gt;The main drawback is that if your application don't use the file dialog of the window manager it don't work.
And there is a lot of case when apps don't use the dialog of the file manager. Examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Qt or KDE pass running on classical Ubuntu&lt;/li&gt;
&lt;li&gt;Other graphical toolkits like &lt;a href="https://www.tcl.tk/"&gt;Tk&lt;/a&gt; or &lt;a href="https://docs.oracle.com/javase/10/docs/api/java/awt/package-summary.html"&gt;AWT&lt;/a&gt; for java apps&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="nautilus_config" src="https://romainjacquet.github.io/images/kio-gio-app.png"&gt;&lt;/p&gt;
&lt;p&gt;To be clear if your application doesn't linked on GIO or KIO, it don't work.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ ldd &lt;span class="k"&gt;$(&lt;/span&gt;which gnumeric&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;grep gio
    libgio-2.0.so.0 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /usr/lib/x86_64-linux-gnu/libgio-2.0.so.0 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f6fffcb7000&lt;span class="o"&gt;)&lt;/span&gt;
$ ldd &lt;span class="k"&gt;$(&lt;/span&gt;which vim&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;grep gio
$ 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Warning&lt;/strong&gt;: the google drive slave for KIO does not work with Ubuntu 20, 
see &lt;a href="https://bugs.launchpad.net/ubuntu/+source/kaccounts-integration/+bug/1864627"&gt;https://bugs.launchpad.net/ubuntu/+source/kaccounts-integration/+bug/1864627&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;The rclone problem&lt;/h1&gt;
&lt;p&gt;Rclone is a tool that is used for all cloud operations. It supports a wide variety
of cloud providers and have a lot of really cools features like &lt;a href="https://rclone.org/commands/rclone_mount/"&gt;mount&lt;/a&gt;.
The approach is very different from KIO/GIO. This is based 
on &lt;a href="https://www.kernel.org/doc/html/latest/filesystems/fuse.html"&gt;FUSE&lt;/a&gt; a
feature of the linux kernel. This is really powerfull compared to the KIO/GIO approach because
you don't need to change the code source of your application. It's just a standard Unix mount. &lt;/p&gt;
&lt;p&gt;&lt;img alt="nautilus_config" src="https://romainjacquet.github.io/images/rclone_mount.png"&gt;&lt;/p&gt;
&lt;h1&gt;Rclone token renewal&lt;/h1&gt;
&lt;p&gt;Okay, it sounds great but what's the problem with rclone? 
I used rclone in 2020 and I finally gave up because the mount was frequently break due to token expiration.
The defaults of rclone are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it's a command line tool so it's not as user-friendly as clicking on the nautilus windows manager
  to connect your drive. Rclone setup is done through a text-mode interface. &lt;/li&gt;
&lt;li&gt;Rclone is more a sysadmin tools than a end-user tools. Many gory details are visible and slow down
  the usage&lt;/li&gt;
&lt;li&gt;all the low-level details of the Google storage API are visible. So you have to create and declare rclone
  as an application in the google Console API to have your own &lt;code&gt;client id&lt;/code&gt;. Having your own client id is 
  not required by it is a good practice. It means you have to be familiar
  with Oauth2, Google apps and things like this (even if there is 
  an &lt;a href="https://rclone.org/drive/#making-your-own-client-id"&gt;official documentation for doing it&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;to automate the mount you have to create your own systemd user units&lt;/li&gt;
&lt;li&gt;I never succeed to  automate the token renewal. It means that
  each time the token expires, I had to re-run the config in text mode :-(. This a &lt;a href="https://forum.rclone.org/t/rclone-google-drive-token-expires-every-week/22502/18"&gt;known problem&lt;/a&gt;. It's the most annoying problem&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I hope that Rclone will improve all this things because it's so frustating to see that the mount is working very
  well and it is broken one week after. I don't understand why it's so simple to connect with Gnome and why it's 
  complex with Rclone. Maybe future posts for the blog? :-) :-)&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>The limitation of mounting google drive with nautilus</title><link href="https://romainjacquet.github.io/the-limitation-of-mounting-google-drive-with-nautilus.html" rel="alternate"></link><published>2021-04-17T14:14:00+02:00</published><updated>2021-04-17T14:14:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2021-04-17:/the-limitation-of-mounting-google-drive-with-nautilus.html</id><summary type="html">&lt;p&gt;using google drive with nautilus mount have some serious limitations&lt;/p&gt;</summary><content type="html">&lt;p&gt;The generalization of the cloud storage comes with a lot of promises and
I really like the possibility to access to my personnal files from everywhere:
web, laptop, personnal computer, ...
With my Android smartphone, it's a native feature. With my Ubuntu the feature is
recent and there are serious limitations.&lt;/p&gt;
&lt;h1&gt;Mounting google drive with Nautilus&lt;/h1&gt;
&lt;p&gt;Years ago I was using &lt;a href="https://rclone.org/"&gt;rclone&lt;/a&gt; to access to my google drive 
files. Rclone have really nice 
&lt;a href="https://rclone.org/commands/rclone_mount/"&gt;mount&lt;/a&gt; feature. But I finally
give up because there is no simple way to automate the login. You always
have difficulties to renew the token.
Here come the nautilus feature that allow you to set oneline account. It's
available from the gnome-control-center.&lt;/p&gt;
&lt;p&gt;&lt;img alt="nautilus_browser" src="https://romainjacquet.github.io/images/oneline_accounts.png"&gt;
&lt;img alt="nautilus_config" src="https://romainjacquet.github.io/images/nautilus_oneline.png"&gt;&lt;/p&gt;
&lt;p&gt;Once configured you can access to your google drive files. But I quicky realized that a lot of 
applications didn't work if the files are located on the drive. Gnumeric, gedit are
working but &lt;a href="https://keepassxc.org/"&gt;keepassxc&lt;/a&gt; or &lt;a href="https://www.vim.org/"&gt;vim&lt;/a&gt; 
doesn't work at all. With keepassxc it sometimes results in data corruption! With vim
the file is correctly displayed but saving the file failed. Even if the &lt;code&gt;nobackup&lt;/code&gt; option,
some strange errors appeared.
&lt;img alt="nautilus_config" src="https://romainjacquet.github.io/images/vim_error.png"&gt;&lt;/p&gt;
&lt;h1&gt;Under the hood&lt;/h1&gt;
&lt;p&gt;Nautilus is using a dedicated library named &lt;a href="https://developer.gnome.org/gio/"&gt;gio&lt;/a&gt; that 
provide all the features to
access to remote drives like google. The official gio description tells 
&lt;strong&gt;provide an API that is so good that developers prefer it over raw POSIX calls&lt;/strong&gt;! I was a little bit surprized 
when I read this :-).
The &lt;a href="https://developer.gnome.org/gio/stable/gio.html"&gt;gio command&lt;/a&gt; allows us 
to manipulate the filesystem from the command line using the gio primitives. Comparing the output
of gio's commands to the standard unix commands (ls, cat) is meaningfull. 
We can understand how gio transform I/O to display the content in nautilus.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ ls 
17lXzXGnhfA89w39PitPdtblkoOW8t8rA  1HnbYPHAwbchlu1pCMnRS-qxRQtfs4ULO  1LJ9W3ZzmfVMyzE09abGOIswXwdjwI8x2
$ gio list -d
mytext2.txt
kpwd
simpsons
$ gio cat mytext2.txt
toto
titi
tata
tutu
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;Why some applications work and other don't work&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;If the application use the standard POSIX functions like &lt;code&gt;open&lt;/code&gt;, &lt;code&gt;read&lt;/code&gt;, &lt;code&gt;write&lt;/code&gt; and manipulate files through
plain-old file descriptors it will not work.&lt;/li&gt;
&lt;li&gt;If the application use the gio library and the gio abstractions like &lt;code&gt;GFile&lt;/code&gt;, &lt;code&gt;GFileInfo&lt;/code&gt;, &lt;code&gt;GInputStream&lt;/code&gt; it will
work. When using &lt;code&gt;open&lt;/code&gt; directly on the file exposed by gio mount it will break the file because open is not 
aware that it is a network share. And some attributes like 'standard::display-name' are lost when performing IOs.
&lt;strong&gt;From Nautilus, if you open a file with an application that don't use gio you could corrupt or lost the file&lt;/strong&gt;!&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;the future?&lt;/h1&gt;
&lt;p&gt;I can't imagine that all applications will use gio in the future. Gio is intended for Gnome application not for
all the application. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Is it possible to have a native support for Google Drive in the future? I mean that you can access without any
additionnal library like gio or KIO.&lt;/li&gt;
&lt;li&gt;Is it possible for gio to intercept POSIX calls and transform them into GIO call?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Not sure because this is complex. But it could be a better user experience.&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>the mystery if HOSTNAME environment variable with ansible</title><link href="https://romainjacquet.github.io/the-mystery-if-hostname-environment-variable-with-ansible.html" rel="alternate"></link><published>2020-10-26T20:41:00+01:00</published><updated>2020-10-26T20:41:00+01:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2020-10-26:/the-mystery-if-hostname-environment-variable-with-ansible.html</id><summary type="html">&lt;p&gt;ansible emulate the bash environment&lt;/p&gt;</summary><content type="html">&lt;p&gt;A friend show me a problem when running Python script with ansible
 &lt;a href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/command_module.html"&gt;command&lt;/a&gt; 
module.
The command failed because the &lt;code&gt;HOSTNAME&lt;/code&gt; variable was missing. The ansible documentation warns about
this behaviour and provide this explanation: "The command(s) will not be processed through
 the shell, so variables like $HOSTNAME and [...] will not work. &lt;strong&gt;Use the shell module if you need these features.&lt;/strong&gt;"
It's true, but there is a serious pitfall. The variable HOSTNAME is not really in the environment, you can't view
when running &lt;code&gt;env&lt;/code&gt;.&lt;/p&gt;
&lt;h1&gt;What's happened when running an ansible command&lt;/h1&gt;
&lt;p&gt;To troubleshoot, I'm using a simple Python script &lt;code&gt;printenv.py&lt;/code&gt; to print env:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/bin/python&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
               &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;=&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt; variables found.&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I'm using a simple docker to simulate the remote host and demonstrate the problem.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="s"&gt;centos:7&lt;/span&gt;

&lt;span class="k"&gt;RUN&lt;/span&gt; yum update -y
&lt;span class="k"&gt;RUN&lt;/span&gt; yum -y install openssh-server openssh-clients sshpass
&lt;span class="k"&gt;RUN&lt;/span&gt; mkdir /var/run/sshd
&lt;span class="k"&gt;RUN&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;root:r00t&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; chpasswd
&lt;span class="k"&gt;RUN&lt;/span&gt; sed -i &lt;span class="s1"&gt;&amp;#39;s/#PermitRootLogin without-password/PermitRootLogin yes/&amp;#39;&lt;/span&gt; /etc/ssh/sshd_config
&lt;span class="k"&gt;RUN&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;s@session\s*required\s*pam_loginuid.so@session optional pam_loginuid.so@g&amp;#39;&lt;/span&gt; -i /etc/pam.d/sshd
&lt;span class="k"&gt;RUN&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;export VISIBLE=now&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/profile
&lt;span class="k"&gt;RUN&lt;/span&gt; /usr/bin/ssh-keygen -A
&lt;span class="k"&gt;COPY&lt;/span&gt; printenv.py /root/

&lt;span class="k"&gt;CMD&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/sbin/sshd&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-D&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Here is the output, and HOSTNAME is set:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;docker &lt;span class="nb"&gt;exec&lt;/span&gt; -it d909a67ab429 python /root/printenv.py
&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
&lt;span class="nv"&gt;TERM&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;xterm
&lt;span class="nv"&gt;HOSTNAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;d909a67ab429
&lt;span class="nv"&gt;HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/root
&lt;span class="m"&gt;4&lt;/span&gt; variables found.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;When running ansible, even with the shell module you did not have access to HOSTNAME:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ ansible -i docker.yml -m shell -a &lt;span class="s1"&gt;&amp;#39;python /root/printenv.py&amp;#39;&lt;/span&gt; centos7 
centos7 &lt;span class="p"&gt;|&lt;/span&gt; SUCCESS &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;rc&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &amp;gt;&amp;gt;
&lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;C
&lt;span class="nv"&gt;TERM&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;xterm-256color
&lt;span class="nv"&gt;SHELL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/bin/bash
&lt;span class="nv"&gt;LC_MESSAGES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;C
&lt;span class="nv"&gt;MAIL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/mail/root
&lt;span class="nv"&gt;SHLVL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;
&lt;span class="nv"&gt;SSH_TTY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/pts/1
&lt;span class="nv"&gt;PWD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/root
&lt;span class="nv"&gt;SSH_CLIENT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.5.117.254 &lt;span class="m"&gt;32896&lt;/span&gt; &lt;span class="m"&gt;22&lt;/span&gt;
&lt;span class="nv"&gt;LOGNAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root
&lt;span class="nv"&gt;USER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;root
&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
&lt;span class="nv"&gt;LC_ALL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;C
&lt;span class="nv"&gt;LS_COLORS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;rs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;:di&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;27&lt;/span&gt;:ln&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;51&lt;/span&gt;:mh&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;44&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:pi&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;40&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;:so&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:do&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;:bd&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;232&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;:cd&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;232&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;:or&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;232&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:mi&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;05&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;232&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:su&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;196&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:sg&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;:ca&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;196&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;226&lt;/span&gt;:tw&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;:ow&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;21&lt;/span&gt;:st&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;21&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:ex&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;34&lt;/span&gt;:*.tar&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.tgz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.arc&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.arj&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.taz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.lha&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.lz4&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.lzh&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.lzma&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.tlz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.txz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.tzo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.t7z&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.zip&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.z&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.Z&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.dz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.gz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.lrz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.lz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.lzo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.xz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.bz2&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.bz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.tbz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.tbz2&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.tz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.deb&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.rpm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.jar&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.war&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.ear&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.sar&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.rar&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.alz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.ace&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.zoo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.cpio&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.7z&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.rz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.cab&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;:*.jpg&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.jpeg&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.gif&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.bmp&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.pbm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.pgm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.ppm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.tga&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.xbm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.xpm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.tif&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.tiff&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.png&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.svg&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.svgz&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.mng&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.pcx&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.mov&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.mpg&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.mpeg&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.m2v&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.mkv&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.webm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.ogm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.mp4&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.m4v&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.mp4v&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.vob&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.qt&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.nuv&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.wmv&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.asf&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.rm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.rmvb&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.flc&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.avi&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.fli&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.flv&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.gl&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.dl&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.xcf&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.xwd&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.yuv&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.cgm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.emf&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.axv&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.anx&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.ogv&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.ogx&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;:*.aac&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.au&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.flac&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.mid&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.midi&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.mka&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.mp3&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.mpc&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.ogg&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.ra&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.wav&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.axa&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.oga&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.spx&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:*.xspf&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;38&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="m"&gt;45&lt;/span&gt;:
&lt;span class="nv"&gt;HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/root
&lt;span class="nv"&gt;_&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/bin/python
&lt;span class="nv"&gt;SSH_CONNECTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.5.117.254 &lt;span class="m"&gt;32896&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;.5.117.1 &lt;span class="m"&gt;22&lt;/span&gt;
&lt;span class="m"&gt;17&lt;/span&gt; variables found.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Same thing happened when the env command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ansible -i docker.yml -m shell -a &lt;span class="s1"&gt;&amp;#39;env| grep HOSTNAME&amp;#39;&lt;/span&gt; centos7 
centos7 &lt;span class="p"&gt;|&lt;/span&gt; FAILED &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;rc&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &amp;gt;&amp;gt;
non-zero &lt;span class="k"&gt;return&lt;/span&gt; code
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The hostname is the name of the container (2b97621d1f75) that docker have generated.
At this point we can see that there is a difference when running the script 
&lt;code&gt;printenv.py&lt;/code&gt; through the docker or using in the ansible shell module.&lt;/p&gt;
&lt;p&gt;The weirdest thing is that the variable HOSTNAME is defined!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt; ansible -i docker.yml -m shell -a &lt;span class="s1"&gt;&amp;#39;echo $HOSTNAME/$USER&amp;#39;&lt;/span&gt; centos7 
centos7 &lt;span class="p"&gt;|&lt;/span&gt; SUCCESS &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="nv"&gt;rc&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &amp;gt;&amp;gt;
2b97621d1f75/root
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;s&gt;It looks like that env command doesn't work as expected.&lt;/s&gt; &lt;strong&gt;UPDATE&lt;/strong&gt;:
I received a message from &lt;a href="https://www.linkedin.com/in/benot-dejean-43a49a1b"&gt;Benot&lt;/a&gt; explaining why there
is a difference between &lt;code&gt;echo&lt;/code&gt;, &lt;code&gt;env&lt;/code&gt; and the &lt;code&gt;printenv.py&lt;/code&gt; script. Simply the difference coming from that &lt;code&gt;HOSTNAME&lt;/code&gt;
variable is set but is not exported. The export is done when reading when loading &lt;code&gt;/etc/profile&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;[&lt;/span&gt;root@264421a1c781 /&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="c1"&gt;# egrep -A 8 -Hnr &amp;#39;HOSTNAME=&amp;#39; /etc/&lt;/span&gt;
/etc/profile:45:HOSTNAME&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;/usr/bin/hostname &lt;span class="m"&gt;2&lt;/span&gt;&amp;gt;/dev/null&lt;span class="sb"&gt;`&lt;/span&gt;
/etc/profile-46-HISTSIZE&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1000&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
/etc/profile-53-export PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;But the &lt;code&gt;/etc/profile&lt;/code&gt; is not loaded when running ansible because ansible doesn't invocate
 bash like an interactive shell neither like a login shell.&lt;/p&gt;
&lt;h1&gt;The cause of this behaviour&lt;/h1&gt;
&lt;p&gt;The problem is really complicated because there is a lot 
of layers involved when running ansible shell command.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;you are using a shell to run the ansible command. All the variables from the environment are not visible from the remote host&lt;/li&gt;
&lt;li&gt;ansible transform the command line ansible into a ssh command that could be see if you increase verbosity with &lt;code&gt;-vvv&lt;/code&gt;. It looks like 
 &lt;code&gt;&amp;lt;10.5.117.1&amp;gt; SSH: EXEC sshpass -d12 ssh -C -o ControlMaster=auto -o ControlPersist=60s -o User=root -o ConnectTimeout=10 -o ControlPath=/home/rjacquet/.ansible/cp/634b52de7c -tt 10.5.117.1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;the ssh is using a bash command to run the ansible module. Note that the &lt;strong&gt;bash command is not a shell login&lt;/strong&gt;, this is why accessing to HOSTNAME variable is not possible. Stuffs like are also visible with more verbosity &lt;code&gt;/bin/sh -c '"'"'rm -f -r /root/.ansible/tmp/ansible-tmp-1603741018.49-107090793072670/ &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; sleep 0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;the bash (non-login) shell is running a python command with the syscall fork&lt;/li&gt;
&lt;li&gt;finally the Python command use the &lt;a href="https://docs.python.org/2.7/library/subprocess.html"&gt;subprocess module&lt;/a&gt; to run &lt;code&gt;printenv.py&lt;/code&gt;! Furthermore the subprocess module doesn't inherit the environment from its parent (the sh scripts). The environment is created is the ansible class &lt;code&gt;AnsibleModule&lt;/code&gt; and
 the &lt;code&gt;run_command&lt;/code&gt; method after the comment &lt;code&gt;# Manipulate the environ we'll send to the new process&lt;/code&gt; 
 (see &lt;a href="https://github.com/ansible/ansible/blob/0d1ecee7670bdbbd84d4c19b0a63c560cfe46fc1/lib/ansible/module_utils/basic.py#L2737"&gt;here&lt;/a&gt;).
    Probably you have never heard about this module except you have already written your own ansible module. This a class that provide
    common things to all modules.&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;Simple workaround&lt;/h1&gt;
&lt;p&gt;The only workaround I found is to change the python or shell script to run the &lt;code&gt;hostname&lt;/code&gt; command
instead of using the environment. This is exactly how the shell initialize the variable.&lt;/p&gt;
&lt;p&gt;&lt;s&gt; If you have a solution without changing the script, feel free to share me the solution :-). &lt;/s&gt;&lt;/p&gt;</content><category term="ci/cd"></category></entry><entry><title>Tor browser don't start with Ubuntu 18.04</title><link href="https://romainjacquet.github.io/tor-browser-dont-start-with-ubuntu-1804.html" rel="alternate"></link><published>2020-05-21T16:00:00+02:00</published><updated>2020-05-21T16:00:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2020-05-21:/tor-browser-dont-start-with-ubuntu-1804.html</id><summary type="html">&lt;p&gt;torbrowser fail to start on Ubuntu 18.04: solution&lt;/p&gt;</summary><content type="html">&lt;p&gt;I sometimes use the &lt;a href="https://www.torproject.org/"&gt;TOR browser&lt;/a&gt; to check connections
from different networks or different countries. My usage of Tor is very rare. The last 
time I try, TOR have never started. To troubleshoot I ended up to launch it from
 the console and same problem occurs.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;rja@SBox:~/tmp/$ torbrowser-launcher 
Gtk-Message: &lt;span class="m"&gt;15&lt;/span&gt;:56:44.321: Failed to load module &lt;span class="s2"&gt;&amp;quot;canberra-gtk-module&amp;quot;&lt;/span&gt;
Tor Browser Launcher
By Micah Lee, licensed under MIT
version &lt;span class="m"&gt;0&lt;/span&gt;.2.9
https://github.com/micahflee/torbrowser-launcher
Refreshing &lt;span class="nb"&gt;local&lt;/span&gt; keyring...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;diagnosis&lt;/h1&gt;
&lt;p&gt;What is this thing? Local keyring? I found more details with the pstree and ps commands.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;rja@SBox:~/tmp/$ pstree -l -p &lt;span class="m"&gt;4517&lt;/span&gt;
bash&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;4517&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;torbrowser-laun&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;6295&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;gpg&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;6300&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
rja@SBox:~/tmp/$ ps auwx &lt;span class="p"&gt;|&lt;/span&gt;grep gpg
rja  &lt;span class="m"&gt;3941&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;.0  &lt;span class="m"&gt;0&lt;/span&gt;.0 &lt;span class="m"&gt;100472&lt;/span&gt;  &lt;span class="m"&gt;3656&lt;/span&gt; ?        SLs  &lt;span class="m"&gt;15&lt;/span&gt;:27   &lt;span class="m"&gt;0&lt;/span&gt;:00 /usr/bin/gpg-agent --supervised
rja  &lt;span class="m"&gt;4974&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;.0  &lt;span class="m"&gt;0&lt;/span&gt;.1  &lt;span class="m"&gt;54808&lt;/span&gt; &lt;span class="m"&gt;16280&lt;/span&gt; tty2     SL+  &lt;span class="m"&gt;15&lt;/span&gt;:31   &lt;span class="m"&gt;0&lt;/span&gt;:00 /usr/bin/gpg --status-fd &lt;span class="m"&gt;2&lt;/span&gt; --homedir /home/rja/.local/share/torbrowser/gnupg_homedir --keyserver hkps://hkps.pool.sks-keyservers.net --keyserver-options ca-cert-file /usr/share/torbrowser-launcher/sks-keyservers.netCA.pem include-revoked no-honor-keyserver-url no-honor-pka-record --refresh-keys
rja  &lt;span class="m"&gt;5075&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;.0  &lt;span class="m"&gt;0&lt;/span&gt;.1  &lt;span class="m"&gt;54104&lt;/span&gt; &lt;span class="m"&gt;15660&lt;/span&gt; tty2     SL+  &lt;span class="m"&gt;15&lt;/span&gt;:34   &lt;span class="m"&gt;0&lt;/span&gt;:00 /usr/bin/gpg --status-fd &lt;span class="m"&gt;2&lt;/span&gt; --homedir /home/rja/.local/share/torbrowser/gnupg_homedir --keyserver hkps://hkps.pool.sks-keyservers.net --keyserver-options ca-cert-file /usr/share/torbrowser-launcher/sks-keyservers.netCA.pem include-revoked no-honor-keyserver-url no-honor-pka-record --refresh-keys
rja  &lt;span class="m"&gt;6300&lt;/span&gt;  &lt;span class="m"&gt;0&lt;/span&gt;.0  &lt;span class="m"&gt;0&lt;/span&gt;.0  &lt;span class="m"&gt;46584&lt;/span&gt;  &lt;span class="m"&gt;8180&lt;/span&gt; pts/0    SL+  &lt;span class="m"&gt;15&lt;/span&gt;:56   &lt;span class="m"&gt;0&lt;/span&gt;:00 /usr/bin/gpg --status-fd &lt;span class="m"&gt;2&lt;/span&gt; --homedir /home/rja/.local/share/torbrowser/gnupg_homedir --keyserver hkps://hkps.pool.sks-keyservers.net --keyserver-options ca-cert-file /usr/share/torbrowser-launcher/sks-keyservers.netCA.pem include-revoked no-honor-keyserver-url no-honor-pka-record --refresh-keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We can see that the &lt;a href="https://gnupg.org/documentation/manpage.html"&gt;GPG&lt;/a&gt; command is used to refresh 
a specific keyring located under /home/rja/.local/share/torbrowser/. 
Multiple GPG commands come from multiple Tor browser launching. Because
it doesn't make sense to run more than one gpg command at the same time on the same keyring.&lt;br&gt;
Gpg told us that the key is associated with the email torbrowser@torproject.org
and that key is still valid.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ &lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; gpg --homedir /home/rja/.local/share/torbrowser/gnupg_homedir --list-keys
/home/rjacquet/.local/share/torbrowser/gnupg_homedir/pubring.kbx
----------------------------------------------------------------
pub   rsa4096 &lt;span class="m"&gt;2014&lt;/span&gt;-12-15 &lt;span class="o"&gt;[&lt;/span&gt;C&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;expires: &lt;span class="m"&gt;2020&lt;/span&gt;-08-24&lt;span class="o"&gt;]&lt;/span&gt;
      EF6E286DDA85EA2A4BA7DE684E2C6E8793298290
uid           &lt;span class="o"&gt;[&lt;/span&gt; unknown&lt;span class="o"&gt;]&lt;/span&gt; Tor Browser Developers &lt;span class="o"&gt;(&lt;/span&gt;signing key&lt;span class="o"&gt;)&lt;/span&gt; &amp;lt;torbrowser@torproject.org&amp;gt;
sub   rsa4096 &lt;span class="m"&gt;2018&lt;/span&gt;-05-26 &lt;span class="o"&gt;[&lt;/span&gt;S&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;expires: &lt;span class="m"&gt;2020&lt;/span&gt;-09-12&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;So what's happenning? I get the clue when I ran the command in  the console:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ &lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; /usr/bin/gpg --status-fd &lt;span class="m"&gt;2&lt;/span&gt; --homedir /home/rjacquet/.local/share/torbrowser/gnupg_homedir --keyserver hkps://hkps.pool.sks-keyservers.net --keyserver-options ca-cert-file /usr/share/torbrowser-launcher/sks-keyservers.netCA.pem include-revoked no-honor-keyserver-url no-honor-pka-record --refresh-keys
gpg: keyserver option &lt;span class="s1"&gt;&amp;#39;ca-cert-file&amp;#39;&lt;/span&gt; is obsolete&lt;span class="p"&gt;;&lt;/span&gt; please use &lt;span class="s1"&gt;&amp;#39;hkp-cacert&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; dirmngr.conf
gpg: Note: &lt;span class="s1"&gt;&amp;#39;--refresh-keys&amp;#39;&lt;/span&gt; is not considered an option
gpg: WARNING: no &lt;span class="nb"&gt;command&lt;/span&gt; supplied.  Trying to guess what you mean ...
usage: gpg &lt;span class="o"&gt;[&lt;/span&gt;options&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;filename&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The syntax of the command is &lt;em&gt;not correct&lt;/em&gt;! Problably the gpg command have been updated
and it broke the torbrowser-launcher.&lt;/p&gt;
&lt;h1&gt;Looking for a solution&lt;/h1&gt;
&lt;p&gt;I try to find a potential update but nothing match gpg or tor.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;apt list --upgradable &lt;span class="p"&gt;|&lt;/span&gt;egrep &lt;span class="s1"&gt;&amp;#39;gpg|tor&amp;#39;&lt;/span&gt;

WARNING: apt does not have a stable CLI interface. Use with caution &lt;span class="k"&gt;in&lt;/span&gt; scripts.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I decided to fix it in the source code.
Yes this is ugly but it will fix my tor browser before updating my Ubuntu to 20.04 :-).&lt;/p&gt;
&lt;p&gt;This gpg call is located in the file /usr/lib/python2.7/dist-packages/torbrowser_launcher/common.py
around line 220:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;        &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Popen&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/usr/bin/gpg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--status-fd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                              &lt;span class="s1"&gt;&amp;#39;--homedir&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;paths&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gnupg_homedir&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                              &lt;span class="s1"&gt;&amp;#39;--keyserver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;hkps://hkps.pool.sks-keyservers.net&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                              &lt;span class="s1"&gt;&amp;#39;--keyserver-options&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ca-cert-file=&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;paths&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;keyserver_ca&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
                              &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;,include-revoked,no-honor-keyserver-url,no-honor-pka-record&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                              &lt;span class="s1"&gt;&amp;#39;--refresh-keys&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;stderr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I decided to remove the keyserver options. There are really unclear for me. I also
replace the server url like it is in the &lt;a href="https://github.com/micahflee/torbrowser-launcher/blob/develop/torbrowser_launcher/common.py"&gt;last version of code source&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$  &lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; gpg --homedir . --keyserver hkps://keys.openpgp.org --refresh-keys
gpg: refreshing &lt;span class="m"&gt;1&lt;/span&gt; key from hkps://keys.openpgp.org
gpg: key 4E2C6E8793298290: no user ID
gpg: Total number processed: &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The victory is near... 
Below are the lines that fix the problem. And TOR starts in few seconds :-)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;        &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Popen&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/usr/bin/gpg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--status-fd&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                              &lt;span class="s1"&gt;&amp;#39;--homedir&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;paths&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gnupg_homedir&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                              &lt;span class="s1"&gt;&amp;#39;--keyserver&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;hkps://keys.openpgp.org&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;                              
                              &lt;span class="s1"&gt;&amp;#39;--refresh-keys&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;stderr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="sysadmin"></category></entry><entry><title>Desktop chair of 2006 VS gaming chair of 2020</title><link href="https://romainjacquet.github.io/desktop-chair-of-2006-vs-gaming-chair-of-2020.html" rel="alternate"></link><published>2020-05-01T14:48:00+02:00</published><updated>2020-05-01T14:48:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2020-05-01:/desktop-chair-of-2006-vs-gaming-chair-of-2020.html</id><summary type="html">&lt;p&gt;dxracer formula08 review&lt;/p&gt;</summary><content type="html">&lt;p&gt;Just after the beginning of the lockdown in France, I started homeworking full time.
I quickly realized that my old computer chair of 2005 was not good enough
to sit from eigth to ten hours per day in front of my computer.&lt;/p&gt;
&lt;p&gt;I bougth this chair sixteen years ago when I was a student. It was
fine for years but currently: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the foam of the seat is near to zero&lt;/li&gt;
&lt;li&gt;I sometime feel some pressure on the elbows. Because armrests are made
with a narrow piece of hard plastic. &lt;/li&gt;
&lt;li&gt;there is no neck support because the chair back stop after the shoulder&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="2005 desktop chair" src="https://romainjacquet.github.io/images/old_chair_2005.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Ordering new chair with the lockdown was not really easy because:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;delivery is a little bit chaotic and delay could be longer than
two weeks&lt;/li&gt;
&lt;li&gt;buying a chair online is not really easy. Finding the correct
size is not simple and I spent a lot of time to look at sizing chart of
the different supplyer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I choose a DxRacer Formula 08 and I was lucky to receive it two days after
 ordering!&lt;/p&gt;
&lt;p&gt;&lt;img alt="2005 desktop chair" src="https://romainjacquet.github.io/images/2020_gaming_chair.jpg"&gt;&lt;/p&gt;
&lt;p&gt;After two weeks of usage, here is the summary.&lt;/p&gt;
&lt;p&gt;Pros:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the wide and soft armrests are really confortable. The armrest are fully covered 
by a very soft material. I really like it; and now I consider that the 
armrest of my old chair were horrible&lt;/li&gt;
&lt;li&gt;the armrest are said &lt;code&gt;3D&lt;/code&gt;. You can adjust the heigth, the angle and the distance
from the back. It is really cool, but I wish I could pull them backward with two or three
additionnal centimeters. I like to work very close from the desktop. Maybe I got shorter arms
than the average :-)&lt;/li&gt;
&lt;li&gt;the neck support and neck pillow are helpfull. Where I read a doc or watch a video,
you can fully lean against the chair back&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;my gaming chair have a lumbar pillow and I sometimes felt a litte tension in the lumbar
at the end of the day. I had the feeling that the lumbar pillow was too big for me.
Either my back is flatter than the average or my weigth is to low for this pillar.&lt;/li&gt;
&lt;li&gt;the major difference between a gaming chair and a traditionnal desktop chair is the angle between
the seat and the floor. With gaming chairs the seat is not really flat, there is a small angle. Exactly
like if you were sitting in a sport car, you lean backward. With this position, it's more difficult
 to spread the legs behind the desk.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="angle comparaison" src="https://romainjacquet.github.io/images/seat_angle.jpg"&gt;&lt;/p&gt;
&lt;p&gt;I'm happy with my new chair. The only problem is the lumbar pillow.
I finally discovered a &lt;a href="https://www.reddit.com/r/pcmasterrace/comments/am8jmp/dxracer_chair_lumbar_pillow_is_it_okay_not_to_use/"&gt;Reddit post&lt;/a&gt; 
describing the same feeling with the lumbar pillow.
I will probably customize it by removing extra foam inside. There is a zipper and
the foam is easily accessible.&lt;/p&gt;
&lt;p&gt;&lt;img alt="angle comparaison" src="https://romainjacquet.github.io/images/pillar_foam.jpg"&gt;&lt;/p&gt;</content><category term="misc"></category></entry><entry><title>Tooling in Python or tooling in bash?</title><link href="https://romainjacquet.github.io/tooling-in-python-or-tooling-in-bash.html" rel="alternate"></link><published>2020-03-28T21:32:00+01:00</published><updated>2020-03-28T21:32:00+01:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2020-03-28:/tooling-in-python-or-tooling-in-bash.html</id><summary type="html">&lt;p&gt;I recommand Python for tooling and I discourage shell&lt;/p&gt;</summary><content type="html">&lt;p&gt;I started working in 2006 in a &lt;a href="https://www.clarisys.fr/"&gt;startup&lt;/a&gt; 
that make an heavy usage of Python.
I quickly realize of powerfull it is, even if it was only &lt;strong&gt;Python 2.4&lt;/strong&gt;. 
But I wasn't sure if Python will continue it's expension and I would
have never believed that Python spread to this level.
In 2006, there was only one way of scripting, tooling or 
instrumenting: &lt;strong&gt;shell&lt;/strong&gt;! The situation has changed.&lt;/p&gt;
&lt;h1&gt;why bash?&lt;/h1&gt;
&lt;p&gt;Shell is a standard since the beginning of Unix because the native interface
of Unix is terminal and your terminal interacts with the OS using &lt;strong&gt;Shell&lt;/strong&gt;. &lt;/p&gt;
&lt;p&gt;&lt;img alt="AIX shell" src="https://romainjacquet.github.io/images/aix.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Bash have some advantages:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;no dependencies. It is installed by default on all distros. 
  Most of the containers have bash&lt;/li&gt;
&lt;li&gt;bash is part of the skill set of every sysadmin&lt;/li&gt;
&lt;li&gt;basic file operations (copy, move, deletion) are simple and powerfull&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Bash have some disavantages:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;syntax is not really eye candy and come directly from the dark ages of the 80's. 
  Especially if you need arithmetic expressions or list&lt;/li&gt;
&lt;li&gt;function and parameters handling is really basic&lt;/li&gt;
&lt;li&gt;there is not extension possible except by calling an external binary&lt;/li&gt;
&lt;li&gt;the library concept is limited to import instruction or function with the &lt;code&gt;source&lt;/code&gt; keyword&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;why python rather than bash&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;it is a real programming language with objects and libraries to better
  structure your code&lt;/li&gt;
&lt;li&gt;you can debug your code using &lt;a href="https://code.visualstudio.com/"&gt;vscode&lt;/a&gt; for example&lt;/li&gt;
&lt;li&gt;you can extend Python using the &lt;a href="https://docs.python.org/3/extending/index.html"&gt;Python/C Api&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;the &lt;a href="https://docs.python.org/3/library/index.html"&gt;standard library&lt;/a&gt; includes a wide range 
  of features that covers 95% of the basic usage&lt;/li&gt;
&lt;li&gt;Python is included by default in the major distros. For example CentOS come with 
  a Python interpreter by default because its package manager (yum) is written in Python.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;nowaday&lt;/h1&gt;
&lt;p&gt;In 2020, I would never recommand to use Shell except for simple and short scripts that don't need
maintenance neither debugging. 
The following situations indicates that you should stop to use shell:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;you are using IO redirections to file and &lt;code&gt;grep -v&lt;/code&gt; to simulate &lt;a href="https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset"&gt;set operations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;you are writing shell scripts with more than 200 lines or more than three functions&lt;/li&gt;
&lt;li&gt;you are spending a lot of time to debug by adding a lot &lt;code&gt;echo&lt;/code&gt;s&lt;/li&gt;
&lt;li&gt;you are thinking to split your shell script into different libraires and use &lt;code&gt;source&lt;/code&gt; to include&lt;/li&gt;
&lt;li&gt;you are calling binaries or other shell scripts with sensitive parameter like &lt;code&gt;--password&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I know the power of usage and I know that people are often reluctant to change.
But remember that it could worse if you realize your error too late. Two of the worst 
systems I have ever seen was made by more than 10.000 lines of code with interleaved 
layers of bash and Python. So if you are 
starting to write a new system from scratch think Python not bash.&lt;/p&gt;</content><category term="sysadmin"></category><category term="development"></category><category term="sysadmin"></category></entry><entry><title>never deploy non-java artifacts with maven</title><link href="https://romainjacquet.github.io/never-deploy-non-java-artifacts-with-maven.html" rel="alternate"></link><published>2020-02-25T21:12:00+01:00</published><updated>2020-02-25T21:12:00+01:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2020-02-25:/never-deploy-non-java-artifacts-with-maven.html</id><summary type="html">&lt;p&gt;do not use maven to deploy non-java artifacts&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="https://maven.apache.org/"&gt;Maven&lt;/a&gt; is a build system and a de facto standard 
of the Java world. It solves the problem of dependencies resolution and improve 
the previous tool &lt;a href="https://ant.apache.org/"&gt;ant&lt;/a&gt; which doesn't offer a standardized
way of building.
Despite &lt;a href="https://maven.apache.org/"&gt;Maven&lt;/a&gt; is clearly not designed to deploy non-java
artifacts, people can try to do it. It usually occured in a large-scale 
project where developpers have no system background, and they try to answer to system 
problems with their everyday tool. I will explain here why you should never do this.&lt;/p&gt;
&lt;h1&gt;Upload to archive repository&lt;/h1&gt;
&lt;p&gt;We will consider here the situation where we have a custom RPM 
of &lt;a href="https://vim.org"&gt;vim&lt;/a&gt; and we want to upload it   to an artifact repository:
&lt;a href="https://fr.sonatype.com/product-nexus-repository"&gt;Nexus&lt;/a&gt;. Like &lt;a href="https://jfrog.com/artifactory/"&gt;artifactory&lt;/a&gt; 
Nexus a very common binary repository
manager that supports many types of repositories and especially maven repositories. You can
query it using an REST API or using maven command: &lt;code&gt;mvn&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;upload with curl&lt;/h2&gt;
&lt;p&gt;Here is the command that I use to upload non-java artifact. In case
of error nexus will answer with an HTTP header containing a string describing the problem.
It is &lt;strong&gt;easy to use and easy to troobleshoot&lt;/strong&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;curl -v --upload-file vim-enhanced-7.4.873-2.el7.psychotic.x86_64.rpm.html -u foo:bar http://localhost:8081/repository/MyRpms/vim-enhanced-7.4.873-2.el7.psychotic.x86_64.rpm.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This the way I recommand to upload on nexus.&lt;/p&gt;
&lt;h2&gt;upload artifact with maven-deploy-file&lt;/h2&gt;
&lt;p&gt;Here is the way to do the same thing wih maven. Maven uses plugin to do everything, it is a plugin execution framework.
To deploy in a similar way of curl we have to use the goal &lt;code&gt;deploy-file&lt;/code&gt; 
of the &lt;a href="https://maven.apache.org/plugins/maven-deploy-plugin/"&gt;deploy&lt;/a&gt; plugin.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mvn deploy:deploy-file --settings&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$PWD&lt;/span&gt;/settings.xml -Dfile&lt;span class="o"&gt;=&lt;/span&gt;vim-common-7.4.629-6.el7.x86_64.rpm -DgroupId&lt;span class="o"&gt;=&lt;/span&gt;molnar.vim -DartifactId&lt;span class="o"&gt;=&lt;/span&gt;vimrpm -Dversion&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.0 -DrepositoryId&lt;span class="o"&gt;=&lt;/span&gt;localnexus -Durl&lt;span class="o"&gt;=&lt;/span&gt;http://localhost:8081/repository/MyRpms/ 
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by com.google.inject.internal.cglib.core.&lt;span class="nv"&gt;$ReflectUtils$1&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;file:/usr/share/maven/lib/guice.jar&lt;span class="o"&gt;)&lt;/span&gt; to method java.lang.ClassLoader.defineClass&lt;span class="o"&gt;(&lt;/span&gt;java.lang.String,byte&lt;span class="o"&gt;[]&lt;/span&gt;,int,int,java.security.ProtectionDomain&lt;span class="o"&gt;)&lt;/span&gt;
WARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.&lt;span class="nv"&gt;$ReflectUtils$1&lt;/span&gt;
WARNING: Use --illegal-access&lt;span class="o"&gt;=&lt;/span&gt;warn to &lt;span class="nb"&gt;enable&lt;/span&gt; warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied &lt;span class="k"&gt;in&lt;/span&gt; a future release
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Scanning &lt;span class="k"&gt;for&lt;/span&gt; projects...
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; 
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------&amp;lt; org.apache.maven:standalone-pom &amp;gt;-------------------
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Building Maven Stub Project &lt;span class="o"&gt;(&lt;/span&gt;No POM&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; --------------------------------&lt;span class="o"&gt;[&lt;/span&gt; pom &lt;span class="o"&gt;]&lt;/span&gt;---------------------------------
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; 
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; --- maven-deploy-plugin:2.7:deploy-file &lt;span class="o"&gt;(&lt;/span&gt;default-cli&lt;span class="o"&gt;)&lt;/span&gt; @ standalone-pom ---
Uploading to localnexus: http://localhost:8081/repository/MyRpms/molnar/vim/vimrpm/1.0/vimrpm-1.0.rpm
Uploaded to localnexus: http://localhost:8081/repository/MyRpms/molnar/vim/vimrpm/1.0/vimrpm-1.0.rpm &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt;.2 MB at &lt;span class="m"&gt;17&lt;/span&gt; MB/s&lt;span class="o"&gt;)&lt;/span&gt;
Uploading to localnexus: http://localhost:8081/repository/MyRpms/molnar/vim/vimrpm/1.0/vimrpm-1.0.pom
Uploaded to localnexus: http://localhost:8081/repository/MyRpms/molnar/vim/vimrpm/1.0/vimrpm-1.0.pom &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;416&lt;/span&gt; B at &lt;span class="m"&gt;5&lt;/span&gt;.5 kB/s&lt;span class="o"&gt;)&lt;/span&gt;
Downloading from localnexus: http://localhost:8081/repository/MyRpms/molnar/vim/vimrpm/maven-metadata.xml
Downloaded from localnexus: http://localhost:8081/repository/MyRpms/molnar/vim/vimrpm/maven-metadata.xml &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;292&lt;/span&gt; B at &lt;span class="m"&gt;7&lt;/span&gt;.5 kB/s&lt;span class="o"&gt;)&lt;/span&gt;
Uploading to localnexus: http://localhost:8081/repository/MyRpms/molnar/vim/vimrpm/maven-metadata.xml
Uploaded to localnexus: http://localhost:8081/repository/MyRpms/molnar/vim/vimrpm/maven-metadata.xml &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;292&lt;/span&gt; B at &lt;span class="m"&gt;4&lt;/span&gt;.8 kB/s&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; BUILD SUCCESS
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Total time:  &lt;span class="m"&gt;1&lt;/span&gt;.007 s
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; Finished at: &lt;span class="m"&gt;2020&lt;/span&gt;-02-24T22:15:08+01:00
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt; ------------------------------------------------------------------------
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Few remarks about this command:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;User and password are hidden in the &lt;code&gt;settings.xml&lt;/code&gt; file&lt;/li&gt;
&lt;li&gt;You have to specify additionnal parameters: groupId, artifactID and version. All this things 
  only make sense in a maven context. In a RPM context it doesn't make sense!&lt;/li&gt;
&lt;li&gt;useless files have been automatically generated&lt;/li&gt;
&lt;li&gt;Even if you don't have seen any warnings &lt;strong&gt;the RPM has been renamed&lt;/strong&gt; 
  from &lt;code&gt;vim-common-7.4.629-6.el7.x86_64.rpm&lt;/code&gt; to &lt;code&gt;vimrpm-1.0.rpm&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="maven renamed upload" src="https://romainjacquet.github.io/images/nexus-rpm-upload.png"&gt;&lt;/p&gt;
&lt;h2&gt;Under the hood&lt;/h2&gt;
&lt;p&gt;The automatic renaming is really annoying and it could not be avoid if you are using 
maven deploy. It happens because maven has been written to handle artifacts following &lt;a href="https://maven.apache.org/guides/mini/guide-naming-conventions.html"&gt;maven 
naming&lt;/a&gt;.
If you look at the code in the maven plugin in &lt;a href="https://github.com/apache/maven-deploy-plugin/blob/maven-deploy-plugin-2.7/src/main/java/org/apache/maven/plugin/deploy/DeployFileMojo.java"&gt;DeployFileMojo.java&lt;/a&gt;, you will see that an URL is build using different factories from Maven classes.
So it's important to understand that you cannot specify the URL of the artifact. If you
need to deploy non-java artifact don't use maven, even if the doc says that 
&lt;code&gt;artifacts which are not built using Maven can be added to any remote repository using the deploy:deploy-file mojo&lt;/code&gt;.
Yes you can, but with no control on the name and final URL.&lt;/p&gt;</content><category term="development"></category><category term="java"></category><category term="nexus"></category><category term="deploy"></category></entry><entry><title>Debugging HTTPS clients written with Python requests</title><link href="https://romainjacquet.github.io/debugging-https-clients-written-with-python-requests.html" rel="alternate"></link><published>2020-01-06T19:48:00+01:00</published><updated>2020-01-06T19:48:00+01:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2020-01-06:/debugging-https-clients-written-with-python-requests.html</id><summary type="html">&lt;p&gt;proper way to display header and content with requests&lt;/p&gt;</summary><content type="html">&lt;p&gt;With the modern web, very few websites still used plain old unencrypted
&lt;a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol"&gt;http protocol&lt;/a&gt;.
It's a good news for end-user because &lt;a href="https://en.wikipedia.org/wiki/HTTPS"&gt;https&lt;/a&gt;
 provides better privacy. For
developers it could be hard to debug HTTPS exchanges because you cannot capture
the network traffic with analyzer like &lt;a href="https://www.tcpdump.org/"&gt;tcpdump&lt;/a&gt;. In fact 
you could but you will only see the HTTPS session initialization not the 
underlying HTTP exchanges. Not enough to debug an HTTP client. 
To solve this problem, &lt;strong&gt;the only solution is to activate debugging from the
client side&lt;/strong&gt;.&lt;/p&gt;
&lt;h1&gt;Debugging using Python requests&lt;/h1&gt;
&lt;p&gt;Python &lt;a href="https://2.python-requests.org/en/master/"&gt;requests&lt;/a&gt; is a nice http 
library, but there is no simple way to activate
debugging. Internet provide many advice to activate debugging. It is always like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;http.client&lt;/span&gt;
&lt;span class="c1"&gt;# logging stuffs&lt;/span&gt;
&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;HTTPConnection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;debuglevel&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://myurl/path/myrsr&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In my opinion it is just a dirty hack that use an hidden feature of http.client,
the low-level http library of Python.
You should not use it because:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;official documentation says that &lt;code&gt;http.client&lt;/code&gt; is normally not used directly&lt;/li&gt;
&lt;li&gt;the level of logging is not configurable&lt;/li&gt;
&lt;li&gt;debuglevel just activate some print statements. It does not use the logging system&lt;/li&gt;
&lt;li&gt;most annoying thing is that activating debuglevel is also printing form data. Just horrible if you 
are trying to debug POST requests. You terminal will be filled with tons of binary data :-)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;A better solution&lt;/h1&gt;
&lt;p&gt;The solution is to use the headers provide by the requests object and adapt it to your need.
Here is an example for the GET request:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;logging&lt;/span&gt;

&lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;basicConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DEBUG&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;format&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &lt;/span&gt;&lt;span class="si"&gt;%(message)s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;logger&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getLogger&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;myclient&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setLevel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DEBUG&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_and_debug&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kw&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot; do the get and print debug info &amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;kw&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; &amp;gt; &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;: &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; &amp;lt; &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;: &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;debug&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Size of the response: &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;

&lt;span class="n"&gt;get_and_debug&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https://docs.python.org/3/_static/py.png&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The output is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Starting new HTTPS connection &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;: docs.python.org
 https://docs.python.org:443 &lt;span class="s2"&gt;&amp;quot;GET /3/_static/py.png HTTP/1.1&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;200&lt;/span&gt; &lt;span class="m"&gt;695&lt;/span&gt;
  &amp;gt; User-Agent: python-requests/2.18.4
  &amp;gt; Accept-Encoding: gzip, deflate
  &amp;gt; Accept: */*
  &amp;gt; Connection: keep-alive
  &amp;lt; Connection: keep-alive
  &amp;lt; Content-Length: &lt;span class="m"&gt;695&lt;/span&gt;
  &amp;lt; Server: nginx
  &amp;lt; Content-Type: image/png
  &amp;lt; Last-Modified: Thu, &lt;span class="m"&gt;14&lt;/span&gt; Feb &lt;span class="m"&gt;2019&lt;/span&gt; &lt;span class="m"&gt;11&lt;/span&gt;:40:31 GMT
  &amp;lt; ETag: &lt;span class="s2"&gt;&amp;quot;5c6553af-2b7&amp;quot;&lt;/span&gt;
  &amp;lt; X-Clacks-Overhead: GNU Terry Pratchett
  &amp;lt; Strict-Transport-Security: max-age&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;315360000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; includeSubDomains&lt;span class="p"&gt;;&lt;/span&gt; preload
  &amp;lt; Via: &lt;span class="m"&gt;1&lt;/span&gt;.1 varnish, &lt;span class="m"&gt;1&lt;/span&gt;.1 varnish
  &amp;lt; Accept-Ranges: bytes
  &amp;lt; Date: Wed, &lt;span class="m"&gt;29&lt;/span&gt; Jan &lt;span class="m"&gt;2020&lt;/span&gt; &lt;span class="m"&gt;19&lt;/span&gt;:54:26 GMT
  &amp;lt; Age: &lt;span class="m"&gt;398453&lt;/span&gt;
  &amp;lt; X-Served-By: cache-jfk8144-JFK, cache-cdg20740-CDG
  &amp;lt; X-Cache: HIT, HIT
  &amp;lt; X-Cache-Hits: &lt;span class="m"&gt;649&lt;/span&gt;, &lt;span class="m"&gt;184&lt;/span&gt;
  &amp;lt; X-Timer: S1580327667.914627,VS0,VE0
 Size of the response: &lt;span class="m"&gt;695&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You can use this method to wrap any top-level methods of requests you need to debug.
If you still cannot debug HTTPS with this blog post, your last chance is to use
website like &lt;a href="http://neverssl.com"&gt;neverssl&lt;/a&gt; :-). &lt;/p&gt;</content><category term="development"></category><category term="python"></category><category term="requests"></category><category term="https"></category><category term="debug"></category></entry><entry><title>Best way to execute bash command with Python 2.x</title><link href="https://romainjacquet.github.io/best-way-to-execute-bash-command-with-python-2x.html" rel="alternate"></link><published>2019-11-24T19:43:00+01:00</published><updated>2019-11-24T19:43:00+01:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-11-24:/best-way-to-execute-bash-command-with-python-2x.html</id><summary type="html">&lt;p&gt;best way to execute bash command with Python2&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Why this is not recommanded&lt;/h1&gt;
&lt;p&gt;Python is my favorite language for complex scripts and tooling.
Unlike &lt;a href="https://www.gnu.org/software/bash/"&gt;bash&lt;/a&gt; it's a real 
programming language and thus provide a better way
to write maintainable scripts. &lt;strong&gt;I wouldn't advise anybody to run 
shell commands from Python script&lt;/strong&gt;. The rigth way is respect the 
Python philosophy &lt;a href="https://www.python.org/dev/peps/pep-0206/#id3"&gt;batteries included&lt;/a&gt; and use a Python library
.&lt;/p&gt;
&lt;p&gt;For example if you need to run a git subcommand, use
&lt;a href="https://gitpython.readthedocs.io/en/stable/"&gt;Git Python&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Using a dedicated library allows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;better error management with exception&lt;/li&gt;
&lt;li&gt;access to more features than those exposed via the CLI&lt;/li&gt;
&lt;li&gt;better of support upgrade. If your command is updated, just update
  your dependency and your application will run without code changes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Below are good reasons to run bash commands from Python:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;minimize dependencies of your application. This is especially
  true for big projects&lt;/li&gt;
&lt;li&gt;there is no dedicated Python module and writing a &lt;a href="https://docs.python.org/2/extending/extending.html"&gt;Python binding &lt;/a&gt; is not profitable for one command&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;the solution&lt;/h1&gt;
&lt;p&gt;Beginners often look for a simple way to run command, capture the output
in a variable and check the return code. They want an equivalent of the 
following bash statements:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;my_output&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;mycmd arg1 arg2&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;return_code&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$?&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Here is my favorite solution:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;tempfile&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;execute_shell&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;    @param name of the command, should be accessible from path&lt;/span&gt;
&lt;span class="sd"&gt;    @param list of the arguments&lt;/span&gt;
&lt;span class="sd"&gt;    Run the command and return a tuple (code, output)&lt;/span&gt;
&lt;span class="sd"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;parameters&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="n"&gt;cmd&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;parameters&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;extend&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# two oens are required otherwise the read get an error&lt;/span&gt;
    &lt;span class="n"&gt;fd_tmp_out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tmp_output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tempfile&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mkstemp&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tmp_output&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;wb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;ret&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;parameters&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stderr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;STDOUT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tmp_output&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readlines&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;ret&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="development"></category></entry><entry><title>Reproject image with LSAT projection using GDAL</title><link href="https://romainjacquet.github.io/reproject-image-with-lsat-projection-using-gdal.html" rel="alternate"></link><published>2019-10-25T11:24:00+02:00</published><updated>2019-10-25T11:24:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-10-25:/reproject-image-with-lsat-projection-using-gdal.html</id><summary type="html">&lt;p&gt;lsat projection with gdal is tricky&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm working near a team of data-scientist specialized in satellite imagery. One the data-scientist
explain me its problem with &lt;a href="https://landsat.visibleearth.nasa.gov/"&gt;Landsat&lt;/a&gt; images.
Landsat images uses the UTM spatial reference and he wants to reproject all images with 
the &lt;code&gt;Space oblique for LANDSAT&lt;/code&gt; projection. I have never heard about this projection before and I
discovered that it is a variation of &lt;a href="https://landsat.gsfc.nasa.gov/space-oblique-mercator-projection/"&gt;Space Oblique Mercartor Projection&lt;/a&gt;. This projection aims to map
all image along the swath. Nasa page quotes that it is "one of the most complex projections ever devised".&lt;/p&gt;
&lt;h1&gt;Explanation&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://gdal.org/"&gt;GDAL&lt;/a&gt; is the standard library for projection and the &lt;a href="https://gdal.org/programs/gdalwarp.html"&gt;&lt;code&gt;gdalwarp&lt;/code&gt;&lt;/a&gt; utility is usefull. It's really powerfull but you often
have very complex case with unusual usage. Here it's the proj4 definition of lsat that doesn't work.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;% gdalwarp -s_srs &lt;span class="s2"&gt;&amp;quot;EPSG:32630&amp;quot;&lt;/span&gt; -t_srs &lt;span class="s1"&gt;&amp;#39;+proj=lsat +lsat=5 +path=201&amp;#39;&lt;/span&gt; 24_mosaic_8bB08.sca.tif toto.tif
ERROR &lt;span class="m"&gt;1&lt;/span&gt;: Translating &lt;span class="nb"&gt;source&lt;/span&gt; or target SRS failed:
+proj&lt;span class="o"&gt;=&lt;/span&gt;lsat +lsat&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt; +path&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;201&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;According to the maintainer of Gdal, there is a parsing limitation in GDal! And the
proj.4 string using lsat can't be converto to WKT format. He advises to uses WKT and extension and
after testing it works! Thank Even Rouault to suggest the tip on the &lt;a href="http://osgeo-org.1560.x6.nabble.com/gdalwarp-proj4-and-Space-Oblique-Mercator-problem-td3752278.html"&gt;osgeo forum&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;Final result&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;function&lt;/span&gt; get_srs &lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
    gdalinfo &lt;span class="nv"&gt;$1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s1"&gt;&amp;#39;AUTHORITY\[&amp;quot;EPSG&amp;quot;,&amp;quot;326&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; cut -d &lt;span class="s1"&gt;&amp;#39;&amp;quot;&amp;#39;&lt;/span&gt; -f &lt;span class="m"&gt;4&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; f &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;ls *tif&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="nv"&gt;epsg_code&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;get_srs &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
    &lt;span class="nv"&gt;basic_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;basename &lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
    gdalwarp -s_srs &lt;span class="s2"&gt;&amp;quot;EPSG:&lt;/span&gt;&lt;span class="nv"&gt;$epsg_code&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; -t_srs &lt;span class="s1"&gt;&amp;#39;LOCAL_CS[&amp;quot;lsat0&amp;quot;,EXTENSION[&amp;quot;PROJ4&amp;quot;,&amp;quot;+proj=lsat +lsat=5 +path=201 +wktext&amp;quot;]]&amp;#39;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;reprojected/&lt;/span&gt;&lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="gis"></category></entry><entry><title>Paranod assertion in the manual of wipe or serious warning?</title><link href="https://romainjacquet.github.io/paranoid-assertion-in-the-manual-of-wipe-or-serious-warning.html" rel="alternate"></link><published>2019-10-06T17:59:00+02:00</published><updated>2019-10-06T17:59:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-10-06:/paranoid-assertion-in-the-manual-of-wipe-or-serious-warning.html</id><summary type="html">&lt;p&gt;Strange remark in the manual of wipe&lt;/p&gt;</summary><content type="html">&lt;p&gt;I recently found old IDE disks in my IT cupboard. I used them through an 
USB connexion to backup data. Now I want to get rid of all those disks,
because cloud and other modern stuffs like USB 3.0 sticks offer more convenient solutions.
As they contains private data like tax forms, I decide to securely delete all data.
So &lt;a href="http://lambda-diode.com/software/wipe"&gt;&lt;code&gt;wipe&lt;/code&gt;&lt;/a&gt; is my friend. 
It's a simple Unix commandline tool that achieve secure 
deletion by writing different patterns on the original data. The idea behind is
prevent from Magnetic Force Microscopy data recovery.&lt;/p&gt;
&lt;p&gt;The first issue I get is that it is really slow. Using a USB 2.0 interface to IDE,
with more than 500 Go to wipe, it will take days at least. Or maybe more than one
week...&lt;/p&gt;
&lt;p&gt;The second issue and the more astonishing is what I found reading &lt;a href="http://manpages.ubuntu.com/manpages/trusty/man1/wipe.1.html"&gt;&lt;code&gt;man wipe&lt;/code&gt;&lt;/a&gt; on Ubuntu 18,
section 'ABOUT JOURNALING FILESYSTEMS AND SOME RECOMMENDATIONS (JUNE 2004)'.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Be aware that harddisks are quite intelligent beasts those days.  They transparently  remap
defective  blocks.   This means that the disk can keep an albeit corrupted (maybe slightly)
but inaccessible and unerasable copy of some of your data.  Modern disks are said  to  have
about  100%  transparent  remapping capacity.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Hum ok, I have heard about this, especially for SSD drives.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I hereby speculate that harddisks can use the spare remapping area to secretly make  copies
of your data.  Rising totalitarianism makes this almost a certitude.  It is quite straight
forward to implement some simple filtering schemes that would copy potentially  interesting
data.   Better,  a  harddisk  can  probably  detect  that  a given file is being wiped, and
silently make a copy of it, while wiping the original as instructed. Recovering such data is 
probably easily done with secret IDE/SCSI commands.   My  guess  is
that  there  are  agreements between harddisk manufacturers and government agencies.  Well-
funded mafia hackers should then be able to find those secret commands too.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I think this is a little bit paranod. I understand that it is technically possible. But there is
no evidence that this mechanism has been in implemend in the IDE controller. I have checked the 
&lt;a href="https://github.com/berke/wipe/tree/master"&gt;wipe github&lt;/a&gt; and the warning is not longer present. 
Even if we go back in the git history. Did debian maintainers add it?
With this kind of warning, I understand  company who prefer destroying over 
wiping for disk with classified documents.&lt;/p&gt;</content><category term="sysadmin"></category></entry><entry><title>Public tendering is decreasing efficiency of the industrials</title><link href="https://romainjacquet.github.io/public-tendering-is-decreasing-efficiency-of-the-industrials.html" rel="alternate"></link><published>2019-08-08T22:01:00+02:00</published><updated>2019-08-08T22:01:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-08-08:/public-tendering-is-decreasing-efficiency-of-the-industrials.html</id><summary type="html">&lt;p&gt;how public tendering process slow down productivity&lt;/p&gt;</summary><content type="html">&lt;p&gt;Last weeks news were not very good for &lt;a href="https://en.wikipedia.org/wiki/Thales_Alenia_Space"&gt;Thales Alenia Space&lt;/a&gt;. The french media Latribune publish
an article revealing a &lt;a href="https://www.latribune.fr/entreprises-finance/industrie/aeronautique-defense/pourquoi-thales-alenia-space-pourrait-decrocher-de-l-orbite-geostationnaire-823824.html"&gt;incoming redundancy plan&lt;/a&gt;.
The article points out the lack in R&amp;amp;D investment at Thales Alenia Space. In my opinion this situation is mainly
created by the public tendering context prevailing in the European space world. &lt;/p&gt;
&lt;h3&gt;Public tendering VS products and services&lt;/h3&gt;
&lt;p&gt;For those who are familiar with the space industry, it's not a surprise. For the others, you must realize
that projects are created the governments. They found the money and they select industrials to realize.
This is referred as B2G, or &lt;a href="https://en.wikipedia.org/wiki/Business-to-government"&gt;business-to-government&lt;/a&gt;. Governments or institutions publish tenders and industrials submit proposals. Tenders are evaluated
by awarding points using both technical and financial criteria. Tenders often contains a list of requirements
or at least a statement of work.
Within traditional business the key point to succeed is having the best products or the best 
services. With B2G the crucial points are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;being referenced by institutions and governments so as to be allowed to submit tenders with restricted
procedure&lt;/li&gt;
&lt;li&gt;being experienced with public tendering. Submit a tender for big contract is really hard and it requires
an experienced bid team.&lt;/li&gt;
&lt;li&gt;having a good credibility. Politicals don't like the change and don't like the risk. If you are a
new comer, your chances to succeed are very low.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You will notice that you can be really good in B2G without having good products or good services. The
downside of this approach is that some company decrease the R&amp;amp;D part to a very low level in order to maximize
profits.&lt;/p&gt;
&lt;h3&gt;Public tendering VS agility&lt;/h3&gt;
&lt;p&gt;Agility is the thing that make you avoid "tunnel effect" and maximize the value delivered to end-users. Few public tenders
deliberately exclude agility but in most of the case it's just impossible. Some public tenders contain a fine-grained
design and high-level of details for requirements. In this conditions, you cannot change the design. If you recommend
a major change in  the design, it is rarely accepted by the end user because it means that he must invalidate the original
contract. I have already seen the following situations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Industrial recommend that the design must change to minimize the risk. But the end user refuses it. It argues that changing design
could create political problem because it means that wrong choice has been done during the tendering phase. Sometimes
industrials are just too fearful to ask for the change.&lt;/li&gt;
&lt;li&gt;Industrial recommend that we cancel a requirement because it's a non-sense or it's not technically possible but end user refuses.
It argues that buying team may reclaims money if the feature is not present.&lt;/li&gt;
&lt;li&gt;Industrial warns that he need more resources (financial or humans) but end user say that it's not possible because
no more money is available. This situations can cause a bogus system or an incomplete system.&lt;/li&gt;
&lt;li&gt;Industrial discover that the original design is not functional but he continue to realize it. The idea is that if
you respect the contract you will be paid, even if you deliver non-functional systems. Some industrials hope
they will receive additional money after end user realize the error.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Geographical return policy&lt;/h3&gt;
&lt;p&gt;Furthermore some public institutions have a geographical return policy
(like &lt;a href="https://en.wikipedia.org/wiki/European_Space_Agency"&gt;ESA&lt;/a&gt;). Even if the idea sounds good, i.e. having a fair
rewarding according to the level of financial contribution, this is really difficult to achieve.
It's hard for the submitter to respect the geographical return policy. If the return policy includes countries
where your company have no contact, it means that you have to select, evaluate and sign an agreement during the bid phase.
Some companies choose to disrespect the geographical policy even it will result in a bad evaluation. Some companies use workaround
by giving minor and not risky parts to fulfil the geographical policy.&lt;/p&gt;
&lt;p&gt;With the &lt;a href="https://en.wikipedia.org/wiki/NewSpace"&gt;new space&lt;/a&gt;, and the globalization, space business is under pressure.
Bad habits created by public tendering context are definitely not good for the business. To prepare the future, you must
invest and take risk. Once the market sanction is here, it's too late.&lt;/p&gt;</content><category term="business"></category></entry><entry><title>Reliability and infrastructure-as-code</title><link href="https://romainjacquet.github.io/reliability-and-infrastructure-as-code.html" rel="alternate"></link><published>2019-07-05T21:00:00+02:00</published><updated>2019-07-05T21:00:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-07-05:/reliability-and-infrastructure-as-code.html</id><summary type="html">&lt;p&gt;Infra-as-code required a stable environment&lt;/p&gt;</summary><content type="html">&lt;p&gt;I like using &lt;a href="https://www.ansible.com/"&gt;ansible&lt;/a&gt;, because it provides a reproductible way to
install servers. This is reproductible ... in theory. This week I get stuck with the
reinstallation of a jenkins server. I was confident because we are using ansible and I had already
made a dozen of installation. But as usual, unexpected events occured :-).
The ansible playbook failed with this type of errors:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Failed to fetch the yum repository key at &lt;code&gt;https://jenkins-ci.org/redhat/jenkins-ci.org.key&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Impossible to download some jenkins' plugin. &lt;code&gt;Failed to connect to updates.jenkins-ci.org at port 443: [Errno 104]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It is a network problem that could be reproduced by a simple oneliner:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;[&lt;/span&gt;root@vmt-jenkins ~&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="c1"&gt;# LANG= curl -XGET -v -L https://jenkins-ci.org/redhat/jenkins-ci.org.key&lt;/span&gt;
* About to connect&lt;span class="o"&gt;()&lt;/span&gt; to jenkins-ci.org port &lt;span class="m"&gt;443&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="c1"&gt;#0)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
* Ignoring the response-body
* Connection &lt;span class="c1"&gt;#2 to host jenkins.io left intact&lt;/span&gt;
* Issue another request to this URL: &lt;span class="s1"&gt;&amp;#39;https://pkg.jenkins.io/redhat/jenkins-ci.org.key&amp;#39;&lt;/span&gt;
* About to connect&lt;span class="o"&gt;()&lt;/span&gt; to pkg.jenkins.io port &lt;span class="m"&gt;443&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="c1"&gt;#3)&lt;/span&gt;
*   Trying &lt;span class="m"&gt;52&lt;/span&gt;.202.51.185...
* Connection timed out
* Failed connect to pkg.jenkins.io:443&lt;span class="p"&gt;;&lt;/span&gt; Connection timed out
* Closing connection &lt;span class="m"&gt;3&lt;/span&gt;
curl: &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; Failed connect to pkg.jenkins.io:443&lt;span class="p"&gt;;&lt;/span&gt; Connection timed out
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I first believed it was a network issue on our company network. But same error occured on
 an external network :-(. So I create an &lt;a href="https://issues.jenkins-ci.org/projects/INFRA/issues/INFRA-2168"&gt;issue&lt;/a&gt; on the bugtracker jenkins.
After opening this issue, I take time to think what could have be done to avoid
 this disaster. 
To be resilient in this faulty context, my advises are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;write playbooks that can use a mirror repository&lt;/strong&gt;.
 If you are using an additionnal repository (in my case
 &lt;code&gt;http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo&lt;/code&gt;)
this can be done by using a variable
containing the URL of the mirror. If the main repository is not 
working, change the variable to use a mirror.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Setup a good monitoring of the required services and dependencies&lt;/strong&gt; of your application. In my case,
 monitoring the jenkins repository sounds weird as it is an official repository and we
expect that it is always up and running. But dependencies could also be LDAP or DNS services.
Monitoring give you an exact situation of the service
health: never broken, sometimes broken, always up. If your monitoring system detect failures of the
 service, do not plan an installation but wait for better condition.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Regularly run your playbooks&lt;/strong&gt;. If you don't regularly run your playbooks, you don't see problems
. You just posptone the troubleshooting phase. At the end, you have to fix all bug at once. This
is harder than steadily doing small fixes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Write the most reliable playbook possible&lt;/strong&gt;. Catch the errors and if possible retry the command. It is
 impossible with some ansible modules because they don't allow to specify neither timeout
 option nor retries option.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Do not forget to backup the running hosts&lt;/strong&gt; even if you are using infra-as-code. Because if
 your playbook fails you will be happy to restore a backup.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Systems using infra-as-code are really cool. But in case of network
 issue or moving dependencies, you may be trapped with &lt;strong&gt;no
possiblity to install&lt;/strong&gt;. Furthermore if you are running on-premises servers.&lt;/p&gt;</content><category term="ci/cd"></category></entry><entry><title>Why Jenkins internal user doesn't work?</title><link href="https://romainjacquet.github.io/why-jenkins-internal-user-doesnt-work.html" rel="alternate"></link><published>2019-06-14T19:59:00+02:00</published><updated>2019-06-14T19:59:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-06-14:/why-jenkins-internal-user-doesnt-work.html</id><summary type="html">&lt;p&gt;Discover how jenkins mix the local users and the Active Directory users&lt;/p&gt;</summary><content type="html">&lt;p&gt;Jenkins has a very popular &lt;a href="https://github.com/jenkinsci/active-directory-plugin"&gt;Active directory plugin&lt;/a&gt;
 to use Active Directory for authentication.
Before the version 2.5, if you lost connectivy to your Active Directory you were stuck.
The only solution was to temporary disable security. 2.5 version bring a feature called
&lt;strong&gt;fall-back user&lt;/strong&gt;. I wasn't able to use it, probably because I didn't understand how
the feature works.
So as one of &lt;a href="https://www.amazon.jobs/en/principles"&gt;Amazon's principle&lt;/a&gt; says: it's time to dive deep!&lt;/p&gt;
&lt;p&gt;The feature was developped after this improvement &lt;a href="https://issues.jenkins-ci.org/browse/JENKINS-39065"&gt;39065&lt;/a&gt;.
The issue has been fixed by a nice &lt;a href="https://github.com/jenkinsci/active-directory-plugin/commit/61feb0c3df6d1979a981e04a41d52337f7343007"&gt;commit&lt;/a&gt; of &lt;a href="https://github.com/fbelzunc"&gt;Felix Belzunce Arcos&lt;/a&gt;.
At first glance, we can see:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;an interesting call to updatePasswordInJenkinsInternalDatabase. This method of 
  ActiveDirectoryUnixAuthenticationProvider.java is called by &lt;code&gt;retrieveUser&lt;/code&gt;. It means that each
  time you authenticate a user, the password in internal database
  is updated if it is the internal user .&lt;/li&gt;
&lt;li&gt;if the &lt;code&gt;retrieveUser&lt;/code&gt; catch a &lt;code&gt;javax.naming.NamingException&lt;/code&gt; jenkins try to authenticate
  the user against the internal database.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When starting a fresh Jenkins installation we get empty folder users:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# ls -l /var/lib/jenkins/users/&lt;/span&gt;
total &lt;span class="m"&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;My jenkins instance is configured to have a fall-back user (thebestuser). 
After first login:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# ls -l /var/lib/jenkins/users/&lt;/span&gt;
total &lt;span class="m"&gt;4&lt;/span&gt;
drwx------. &lt;span class="m"&gt;2&lt;/span&gt; jenkins jenkins  &lt;span class="m"&gt;24&lt;/span&gt; &lt;span class="m"&gt;14&lt;/span&gt; juin  &lt;span class="m"&gt;12&lt;/span&gt;:01 thebestuser_2536622897412429280
-rw-r--r--. &lt;span class="m"&gt;1&lt;/span&gt; jenkins jenkins &lt;span class="m"&gt;319&lt;/span&gt; &lt;span class="m"&gt;14&lt;/span&gt; juin  &lt;span class="m"&gt;12&lt;/span&gt;:01 users.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Look at the content:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# grep -A 1 -B 1 password /var/lib/jenkins/users/hebestuser_2536622897412429280/config.xml &lt;/span&gt;
    &amp;lt;hudson.security.HudsonPrivateSecurityRealm_-Details&amp;gt;
      &amp;lt;passwordHash&amp;gt;#jbcrypt:&lt;span class="nv"&gt;$2&lt;/span&gt;a&lt;span class="nv"&gt;$10$WZsuWs&lt;/span&gt;.45fdsfsc6d6q465d4sq64fs6q/45dsqdqWSDSDRG&amp;lt;/passwordHash&amp;gt;
    &amp;lt;/hudson.security.HudsonPrivateSecurityRealm_-Details&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;So Jenkins users database is just XML files on the disk.
I try to simulate the connexion loss by a simple iptable rules.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;firewall-cmd --direct --add-rule ipv4 filter OUTPUT &lt;span class="m"&gt;0&lt;/span&gt; -p tcp -m tcp --dport&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;389&lt;/span&gt; -j DROP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I tested it but it failed! Here is an extract of the jenkins.log&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;juin&lt;/span&gt; &lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2019&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;29&lt;/span&gt; &lt;span class="n"&gt;PM&lt;/span&gt; &lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;active_directory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ActiveDirectorySecurityRealm&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;DescriptorImpl&lt;/span&gt; &lt;span class="n"&gt;bind&lt;/span&gt;
&lt;span class="n"&gt;AVERTISSEMENT&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Failed&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;bind&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="mf"&gt;172.30&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;4.10&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;389&lt;/span&gt;
&lt;span class="n"&gt;javax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;naming&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CommunicationException&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;172.30&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;4.10&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;389&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Root&lt;/span&gt; &lt;span class="n"&gt;exception&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SocketTimeoutException&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;connect&lt;/span&gt; &lt;span class="n"&gt;timed&lt;/span&gt; &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sun&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jndi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ldap&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Connection&lt;/span&gt;&lt;span class="o"&gt;.&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Connection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;228&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sun&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jndi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ldap&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LdapClient&lt;/span&gt;&lt;span class="o"&gt;.&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LdapClient&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;137&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sun&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jndi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ldap&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LdapClient&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getInstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LdapClient&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1609&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sun&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jndi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ldap&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LdapCtx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LdapCtx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2749&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sun&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jndi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ldap&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LdapCtx&lt;/span&gt;&lt;span class="o"&gt;.&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LdapCtx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;319&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sun&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jndi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ldap&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LdapCtxFactory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getUsingURL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LdapCtxFactory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;192&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sun&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jndi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ldap&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LdapCtxFactory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getLdapCtxInstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LdapCtxFactory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;151&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;active_directory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ActiveDirectorySecurityRealm&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;DescriptorImpl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bind&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActiveDirectorySecurityRealm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;668&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;active_directory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ActiveDirectorySecurityRealm&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;DescriptorImpl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bind&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActiveDirectorySecurityRealm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;599&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;active_directory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ActiveDirectoryUnixAuthenticationProvider&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActiveDirectoryUnixAuthenticationProvider&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;359&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;active_directory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ActiveDirectoryUnixAuthenticationProvider&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActiveDirectoryUnixAuthenticationProvider&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;342&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;common&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LocalCache&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;LocalManualCache&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LocalCache&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;4767&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;google&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;common&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LocalCache&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;LoadingValueReference&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loadFuture&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LocalCache&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3568&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It doesn't work because the LDAP layer throws a CommunicationException not a Naming Exception.
Jenkins improvement to come?&lt;/p&gt;</content><category term="ci/cd"></category></entry><entry><title>Fix Filezilla import SSH key problem</title><link href="https://romainjacquet.github.io/fix-filezilla-import-ssh-key-problem.html" rel="alternate"></link><published>2019-05-24T18:13:00+02:00</published><updated>2019-05-24T18:13:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-05-24:/fix-filezilla-import-ssh-key-problem.html</id><summary type="html">&lt;p&gt;filezilla only support PKCS...&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm always surprized how long users can suffer from IT problem before asking for help.
One employee of my company told me that it has problem with a ssh key. It uses its
key to copy with scp and it works. But he cannot use &lt;a href="https://filezilla-project.org/"&gt;Filezilla&lt;/a&gt;.
Filezilla refuses the key without any warning.
I try to use Filezilla with a newly-generated key and I successfully connect to a test server.
So the problem comes from the key.
Let's have a look to the keys. Both keys looks correct and contains correct header and footer:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;-----BEGIN RSA PRIVATE KEY-----
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
-----END RSA PRIVATE KEY-----
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;But openssl failed to check to suspicious key:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;% openssl rsa -check -in suspiciouskey_id                               
RSA key ok
&lt;span class="m"&gt;140634506504080&lt;/span&gt;:error:0D0680A8:asn1 encoding routines:ASN1_CHECK_TLEN:wrong tag:tasn_dec.c:1199:
&lt;span class="m"&gt;140634506504080&lt;/span&gt;:error:0D06C03A:asn1 encoding routines:ASN1_D2I_EX_PRIMITIVE:nested asn1 error:tasn_dec.c:767:
&lt;span class="m"&gt;140634506504080&lt;/span&gt;:error:0D08303A:asn1 encoding routines:ASN1_TEMPLATE_NOEXP_D2I:nested asn1 error:tasn_dec.c:699:Field&lt;span class="o"&gt;=&lt;/span&gt;n, &lt;span class="nv"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;RSA
&lt;span class="m"&gt;140634506504080&lt;/span&gt;:error:04093004:rsa routines:OLD_RSA_PRIV_DECODE:RSA lib:rsa_ameth.c:121:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;A deeper inspection show that the key contains extra data:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;% openssl asn1parse &amp;lt; suspiciouskey_id 
    &lt;span class="m"&gt;0&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1214&lt;/span&gt; cons: SEQUENCE          
    &lt;span class="m"&gt;4&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;   &lt;span class="m"&gt;1&lt;/span&gt; prim: INTEGER           :00
    &lt;span class="m"&gt;7&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="m"&gt;13&lt;/span&gt; cons: SEQUENCE          
    &lt;span class="m"&gt;9&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;   &lt;span class="m"&gt;9&lt;/span&gt; prim: OBJECT            :rsaEncryption
   &lt;span class="m"&gt;20&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;   &lt;span class="m"&gt;0&lt;/span&gt; prim: NULL              
   &lt;span class="m"&gt;22&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1192&lt;/span&gt; prim: OCTET STRING      &lt;span class="o"&gt;[&lt;/span&gt;HEX DUMP&lt;span class="o"&gt;]&lt;/span&gt;:..
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;A normal key looks like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;  openssl asn1parse &amp;lt; good_id 
    &lt;span class="m"&gt;0&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1189&lt;/span&gt; cons: SEQUENCE          
    &lt;span class="m"&gt;4&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;   &lt;span class="m"&gt;1&lt;/span&gt; prim: INTEGER           :00
    &lt;span class="m"&gt;7&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;257&lt;/span&gt; prim: INTEGER           :XXXYYYYY
  &lt;span class="m"&gt;268&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;   &lt;span class="m"&gt;3&lt;/span&gt; prim: INTEGER           :010001
  &lt;span class="m"&gt;273&lt;/span&gt;:d&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;  &lt;span class="nv"&gt;hl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="nv"&gt;l&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;256&lt;/span&gt; prim: INTEGER           :XXXXXYYY
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In fact, this is not a simple key as you can generate with &lt;a href="http://man7.org/linux/man-pages/man1/ssh-keygen.1.html"&gt;ssh-keygen&lt;/a&gt;.
This key contains extra information because it's a &lt;a href="https://en.wikipedia.org/wiki/PKCS_8"&gt;PKCS#8&lt;/a&gt;.
By default, ssh-keygen generates a &lt;a href="https://en.wikipedia.org/wiki/PKCS_1"&gt;PKCS#1&lt;/a&gt;. So
I try to convert the key:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openssl rsa -in suspiciouskey -out newkey
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It works!!!
Why the original key was in PKCS#8 format? Did the sysadmin use the ssh-keygen switch &lt;code&gt;-m PKCS8&lt;/code&gt;? 
SCP is probably smart enough to extract the key from PKCS#8 but Filezilla can't (at least with 3.42.1)&lt;/p&gt;</content><category term="sysadmin"></category></entry><entry><title>M.2 speed on Intel H97</title><link href="https://romainjacquet.github.io/m2-speed-on-intel-h97.html" rel="alternate"></link><published>2019-05-04T19:11:00+02:00</published><updated>2019-05-04T19:11:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-05-04:/m2-speed-on-intel-h97.html</id><summary type="html">&lt;p&gt;discover the real speed of M2 interface whith H97&lt;/p&gt;</summary><content type="html">&lt;p&gt;I bought my personnal computer at the end of 2014. This is really old in the modern world and today
booting my Ubuntu is not fast.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;switch on the power button&lt;/li&gt;
&lt;li&gt;15s after I saw the grub menu&lt;/li&gt;
&lt;li&gt;1 minute and 15s after I got the login screen&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I admit it is not catastrophic, but I can have a better user experience :-). I also noticed
that Firefox took 9s to start. So I decided to upgrade.
First I added 8Gb of DDR3 1600 Mhz. And decided to use &lt;a href="https://en.wikipedia.org/wiki/M.2"&gt;M.2&lt;/a&gt; &lt;a href="https://en.wikipedia.org/wiki/Solid-state_drive"&gt;SSD&lt;/a&gt; disk instead of
my old SATA disk.&lt;/p&gt;
&lt;p&gt;Before buying the new disk I try to find the supported PCI revision and speed
of my M.2 connector. With ga-h97-d3h mobo, I checked the layout in the user manual
and it is really unclear.&lt;/p&gt;
&lt;p&gt;&lt;img alt="ga-h97-d3h layout" src="https://romainjacquet.github.io/images/ga-h97-d3h-layout.png"&gt;&lt;/p&gt;
&lt;p&gt;M.2 is just an interface. The user manual says that it is socket 3 and type M. So we
know that it is for SSD (SATA or PCIE) with up to four &lt;a href="https://en.wikipedia.org/wiki/PCI_Express#Lane"&gt;lanes&lt;/a&gt;. The lanes are bidirectionnal signaling
pairs used to carry data. As you expect, the more lanes you get the faster is your disk.
On the diagram the left part is the PCIe area and there is no link to the M.2 in the right part.
The other question is the supported revision. This mobo can support up to PCIe revision 3.0 
but  all the PCIe buses on the mobo doesn't support 3.0.&lt;/p&gt;
&lt;p&gt;&lt;img alt="ga-h97-d3h pcie revision" src="https://romainjacquet.github.io/images/pcie-revision.png"&gt;&lt;/p&gt;
&lt;p&gt;Internet has some posts about the PCIE support of GA-H97-D3H but no clear answer.&lt;/p&gt;
&lt;h1&gt;Installation&lt;/h1&gt;
&lt;p&gt;Booting on M.2 was relatively new thing when H97 chipset was created. But I haven't seen 
any difficulty except that I had to upgrade the BIOS to install F7 version (&lt;a href="https://www.gigabyte.com/Press/News/1358"&gt;according to Gybabyte announcement&lt;/a&gt;
)).
 Before the F6 version you can use nvme disk but you cannot boot it. I reinstalled my Ubuntu.
 I didn't record the installation time but it seems really fast.
With the lspci option, I checked the speed:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# lspci |grep -i nvme&lt;/span&gt;
&lt;span class="m"&gt;02&lt;/span&gt;:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller SM961/PM961
lspci -vvv -s &lt;span class="m"&gt;02&lt;/span&gt;:00.0&lt;span class="p"&gt;|&lt;/span&gt;grep LnkCap
        LnkCap: Port &lt;span class="c1"&gt;#0, Speed 8GT/s, Width x4, ASPM L1, Exit Latency L0s unlimited, L1 &amp;lt;64us&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Great! I got four lanes (Width x4) for my new disk.&lt;/p&gt;
&lt;h1&gt;Final benchmark&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;switch on the power button&lt;/li&gt;
&lt;li&gt;10s after I saw the grub menu&lt;/li&gt;
&lt;li&gt;25s after I got the login screen (&lt;strong&gt;more than three time faster!&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now Ubuntu's desktop is really reactive. If you have the same mobo, or an H97-based mobo
do not hesitate to upgrade.&lt;/p&gt;</content><category term="sysadmin"></category></entry><entry><title>Branch indexing failure in Jenkins</title><link href="https://romainjacquet.github.io/branch-indexing-failure-in-jenkins.html" rel="alternate"></link><published>2019-04-24T20:13:00+02:00</published><updated>2019-04-24T20:13:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-04-24:/branch-indexing-failure-in-jenkins.html</id><summary type="html">&lt;p&gt;corrupted git config files lead to branch indexing failure&lt;/p&gt;</summary><content type="html">&lt;p&gt;As usual, CI/CD anomalies are always a source for blogging. And also a 
way of improving the reliability of the CI system. A user
has complained of Jenkins branch indexing failure. The branch indexing is a feature of
&lt;a href="https://jenkins.io/doc/book/pipeline/multibranch/"&gt;Multibranch pipeline&lt;/a&gt; that discover new branches
and delete old branches. 
Instead of index branches, the user got a fancy java stack :-). &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lang&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IllegalArgumentException&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Repository&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jenkins&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;caches&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt;&lt;span class="n"&gt;ca6ff4bea60131b71f18bc70a1dd5f&lt;/span&gt;&lt;span class="o"&gt;/.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;invalid&lt;/span&gt; &lt;span class="n"&gt;Cannot&lt;/span&gt; &lt;span class="n"&gt;read&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jenkins&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;caches&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;46&lt;/span&gt;&lt;span class="n"&gt;ca6ff4bea60131b71f18bc70a1dd5f&lt;/span&gt;&lt;span class="o"&gt;/.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eclipse&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jgit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BaseRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loadConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BaseRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;687&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eclipse&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jgit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BaseRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BaseRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;662&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eclipse&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jgit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BaseRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;guessWorkTreeOrFail&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BaseRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;698&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eclipse&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jgit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BaseRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setupWorkTree&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BaseRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;628&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eclipse&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jgit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BaseRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BaseRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;557&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eclipse&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jgit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;storage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FileRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FileRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;92&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eclipse&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jgit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;storage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FileRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FileRepositoryBuilder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;jenkinsci&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gitclient&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CliGitAPIImpl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getRepository&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CliGitAPIImpl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2336&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GitAPI&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getRepository&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GitAPI&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;269&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;jenkins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AbstractGitSCMSource&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;retrieve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;AbstractGitSCMSource&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;234&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;jenkins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;api&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SCMSource&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SCMSource&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;148&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;jenkins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MultiBranchProject&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;computeChildren&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MultiBranchProject&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;294&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cloudbees&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;folder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;computed&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ComputedFolder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;updateChildren&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ComputedFolder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;157&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cloudbees&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;folder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;computed&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FolderComputation&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FolderComputation&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;122&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ResourceController&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ResourceController&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;98&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;hudson&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Executor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Executor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;404&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Finished&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;FAILURE&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Checking the config file shows a corruption. This file is a classic git file that you 
have when you clone a repository. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;ssh&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="k"&gt;user&lt;/span&gt;&lt;span class="nv"&gt;@tuleap&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;remote &amp;quot;origin&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;ssh&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="k"&gt;user&lt;/span&gt;&lt;span class="nv"&gt;@tuleap&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;git&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The first line shoud be included in a remote
section. Having two remote sections in git is common but not for CI usage.
I wrote a script to detect broken config:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="nv"&gt;GIT_CONFIG_FILES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;find /home/jenkins/caches -mindepth &lt;span class="m"&gt;3&lt;/span&gt; -maxdepth &lt;span class="m"&gt;3&lt;/span&gt; -name config&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; f &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;$GIT_CONFIG_FILES&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="nv"&gt;FIRST_LINE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;head -n &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$FIRST_LINE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; !&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[core]&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;then&lt;/span&gt;
                &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;------------------------------------------------------&amp;quot;&lt;/span&gt;
                &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Suspicious config file &lt;/span&gt;&lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
                head &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
                &lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$((&lt;/span&gt;i+1&lt;span class="k"&gt;))&lt;/span&gt;
        &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Found &lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt; suspicious files&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Fixing the file is easy.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Add the missing lines by reading the beginning of the file in a fresh clone;&lt;/li&gt;
&lt;li&gt;Remove the first line which is obviously invalid;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The correct config file is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[core]&lt;/span&gt;
    &lt;span class="na"&gt;repositoryformatversion&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;0&lt;/span&gt;
    &lt;span class="na"&gt;filemode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;true&lt;/span&gt;
    &lt;span class="na"&gt;bare&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;false&lt;/span&gt;
    &lt;span class="na"&gt;logallrefupdates&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;true&lt;/span&gt;
&lt;span class="k"&gt;[remote &amp;quot;origin&amp;quot;]&lt;/span&gt;
    &lt;span class="na"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;ssh://user@tuleap/repo.git&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I'm still wondering who has corrupted the files. The strange thing is that 
JGIT is visible in  the stack even if my job was supposed to use the git client 
configuration. &lt;/p&gt;</content><category term="ci/cd"></category></entry><entry><title>Fix mixed-language UI in firefox</title><link href="https://romainjacquet.github.io/fix-mixed-language-ui-in-firefox.html" rel="alternate"></link><published>2019-04-17T21:50:00+02:00</published><updated>2019-04-17T21:50:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-04-17:/fix-mixed-language-ui-in-firefox.html</id><summary type="html">&lt;p&gt;firefox language problem&lt;/p&gt;</summary><content type="html">&lt;p&gt;My company is using an &lt;a href="https://en.wikipedia.org/wiki/Enterprise_resource_planning"&gt;ERP&lt;/a&gt;
 and everyone must use it to report monthly activity.
Doing this report has always been a true non-user-friendly experience. It is a
web portal written in &lt;a href="https://en.wikipedia.org/wiki/ASP.NET"&gt;ASP.net&lt;/a&gt; as the aspx
extension of the pages demonstrates. The most annoying problem is a mix of french
and english in the interface.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Date format is english style (MM/DD/YYYY) and not french style (DD/MM/YYYY)&lt;/li&gt;
&lt;li&gt;Calendar displays weeks that begins the Sunday instead of Monday&lt;/li&gt;
&lt;li&gt;Labels are in french in the interface&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="EN calendar and french labels" src="https://romainjacquet.github.io/images/bad_calendar.PNG"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="EN dates and french labels" src="https://romainjacquet.github.io/images/bad_date.PNG"&gt;&lt;/p&gt;
&lt;p&gt;My first idea was that the website have a bug. But testing on Chrome shows that
it works! I launched a debug session with Firefox and find a wrong header: 
&lt;code&gt;Accept-Language:en-US,fr-FR;q=0.7,en;q=0.3&lt;/code&gt;.
The &lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language"&gt;Accept-Language header&lt;/a&gt;
 is sent by the browser to define the language of the session. The value of this header depends on
 the firefox settings language (Settings &amp;gt; Options &amp;gt; Language). In my case it was EN-US. I
 changed to &lt;code&gt;fr-fr&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="EN dates and french labels" src="https://romainjacquet.github.io/images/default_language.PNG"&gt;&lt;/p&gt;
&lt;p&gt;After restarting Firefox it works. But it clearly shows that the label of the application
are agnostic to the header &lt;code&gt;Accept-Language&lt;/code&gt; and had cause this strange mix. This is 
not a proper way of programming. Firefox version is &lt;a href="https://support.mozilla.org/en-US/products/firefox-enterprise"&gt;Firefox entreprise&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="EN dates and french labels" src="https://romainjacquet.github.io/images/firefox_version.PNG"&gt;&lt;/p&gt;
&lt;p&gt;Why do the IT guys provide a default installation with
a locale EN-US? It is possible to customize the installer and provide
a per locale installer. You just have to use the switch &lt;code&gt;lang=&lt;/code&gt; in  the 
msi installer (&lt;a href="https://support.mozilla.org/en-US/kb/deploy-firefox-msi-installers#w_configuration-options"&gt;official documentation&lt;/a&gt;)...&lt;/p&gt;</content><category term="sysadmin"></category></entry><entry><title>Useless import static in Java</title><link href="https://romainjacquet.github.io/useless-import-static-in-java.html" rel="alternate"></link><published>2019-04-09T21:00:00+02:00</published><updated>2019-04-09T21:00:00+02:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-04-09:/useless-import-static-in-java.html</id><summary type="html">&lt;p&gt;Useless import static in Java&lt;/p&gt;</summary><content type="html">&lt;p&gt;This post is about Java philosophy and feature introduction in language.
Those days I develop a software piece in Java. Yeah, that is painfull
for a Python user like me. I have a basic level in Java. 
I can write Java code but I'm still thinking as it was Java 1.4.
While browsing a modern source code, I discovered the 
&lt;a href="https://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html"&gt;&lt;code&gt;import static&lt;/code&gt; keyword&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import static&lt;/span&gt; &lt;span class="nn"&gt;java.lang.Math.E&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;E&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Before Java 1.5 and &lt;code&gt;import static&lt;/code&gt;, Java could only import packages or class. Now Java can import static members: functions or constants. 
The official documentation give two reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;avoid to declare local copies of constants;&lt;/li&gt;
&lt;li&gt;avoid inheritance abuse (Constant interface anti-pattern);&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;local copies&lt;/h3&gt;
&lt;p&gt;I agree that local copies of constant are not a good idea for the maintenance. In the future you may want to
change the constant, and having a copy is the best way to forget to modify the copy. Also having two constant
for the same value has no sense.&lt;/p&gt;
&lt;h3&gt;constant factorization&lt;/h3&gt;
&lt;p&gt;I discovered that some java developers
 &lt;strong&gt;use interface and inheritance to factorize constant usage!&lt;/strong&gt; This method is now 
 officially discouraged and the &lt;a href="https://en.wikipedia.org/wiki/Constant_interface"&gt;anti-pattern Constant interface&lt;/a&gt; is on wikipedia.&lt;/p&gt;
&lt;p&gt;Why not importing the class and use a qualified constant?
In addition, direct import of member could lead to &lt;a href="https://stackoverflow.com/questions/22903542/what-is-namespace-pollution?noredirect=1&amp;amp;lq=1"&gt;name space pollution&lt;/a&gt;. For java designer use qualified code is boilerplate code. Boilerplate is the word used in the
&lt;a href="https://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html"&gt;changelog&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In my opinion this feature is absolutely useless. Except under particular circumstances, I don't see any added-value.
And why do they chose to add the static keyword? The compiler could do that for you.
This example show us how the community and usage can change the langage. I'm quite
sure that if the Constant interface haven't been used, the &lt;code&gt;import static&lt;/code&gt; keyword wouldn't exist.&lt;/p&gt;</content><category term="development"></category></entry><entry><title>DNS resolution with CentOS</title><link href="https://romainjacquet.github.io/dns-resolution-with-centos.html" rel="alternate"></link><published>2019-03-28T22:13:00+01:00</published><updated>2019-03-28T22:13:00+01:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-03-28:/dns-resolution-with-centos.html</id><summary type="html">&lt;p&gt;don't put more than three entries in your DNS&lt;/p&gt;</summary><content type="html">&lt;p&gt;I was trying to fix an issue on a server that use &lt;a href="https://mesosphere.github.io/mesos-dns/"&gt;mesos-dns&lt;/a&gt;.
I discovered a CentOS host with this strange configuration in &lt;code&gt;/etc/resolv.conf&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;# Generated by NetworkManager
search mycorp.corp

# handle company names
nameserver 10.0.0.10
nameserver 10.0.0.11
# handle .mesos
nameserver 10.0.0.100
nameserver 10.0.0.110
nameserver 10.0.0.120
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Wow many entries. I usually found only two entries. How does it works? How the OS will choose between the different entry? What is the alogrithm?
As usual, I first read the manual with &lt;code&gt;man resolv.conf&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;Up&lt;/span&gt;  &lt;span class="nv"&gt;to&lt;/span&gt;  &lt;span class="nv"&gt;MAXNS&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;currently&lt;/span&gt;  &lt;span class="mi"&gt;3&lt;/span&gt;,  &lt;span class="nv"&gt;see&lt;/span&gt;  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nv"&gt;resolv&lt;/span&gt;.&lt;span class="nv"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt; &lt;span class="nv"&gt;servers&lt;/span&gt; &lt;span class="nv"&gt;may&lt;/span&gt; &lt;span class="nv"&gt;be&lt;/span&gt; &lt;span class="nv"&gt;listed&lt;/span&gt;, &lt;span class="nv"&gt;one&lt;/span&gt;
&lt;span class="nv"&gt;per&lt;/span&gt; &lt;span class="nv"&gt;keyword&lt;/span&gt;.  &lt;span class="k"&gt;If&lt;/span&gt; &lt;span class="nv"&gt;there&lt;/span&gt; &lt;span class="nv"&gt;are&lt;/span&gt; &lt;span class="nv"&gt;multiple&lt;/span&gt; &lt;span class="nv"&gt;servers&lt;/span&gt;, &lt;span class="nv"&gt;the&lt;/span&gt; &lt;span class="nv"&gt;resolver&lt;/span&gt; &lt;span class="nv"&gt;library&lt;/span&gt; &lt;span class="nv"&gt;queries&lt;/span&gt; &lt;span class="nv"&gt;them&lt;/span&gt;
&lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;the&lt;/span&gt;  &lt;span class="nv"&gt;order&lt;/span&gt;  &lt;span class="nv"&gt;listed&lt;/span&gt;.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I checked in the resolver header file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;% egrep &amp;quot;define MAXNS&amp;quot; /usr/include/resolv.h&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
#&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;define&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;MAXNS&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;/*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;max&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;#&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;servers&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="o"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;ll&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;track&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*/&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Same result. So it useless to put more than three entry in your resolv.conf.
The code source of the resolver in glibc 2.12.2 show also many loop with an upper limit of MAXNS.
For exemple in res_send.c line 392:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;MAXNS&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;So take care with /etc/resolv.conf if you put more than three nameserver, extra entries will be silently ignored.
And &lt;a href="https://en.wikipedia.org/wiki/RTFM"&gt;RTFM&lt;/a&gt; :-)&lt;/p&gt;</content><category term="sysadmin"></category></entry><entry><title>Docker registry forensic</title><link href="https://romainjacquet.github.io/docker-registry-forensic.html" rel="alternate"></link><published>2019-03-13T23:00:00+01:00</published><updated>2019-03-13T23:00:00+01:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-03-13:/docker-registry-forensic.html</id><summary type="html">&lt;p&gt;forensic into the docker registry&lt;/p&gt;</summary><content type="html">&lt;p&gt;I had to debug in our container registry because something unclear happend. At office
we are using the &lt;a href="https://github.com/docker/distribution/releases/tag/v2.6.0"&gt;Docker registry v2.6.0&lt;/a&gt;
 to host
hundred of repositories. An user has complained about a missing image. The
image has been pushed, but it is no longer here... &lt;code&gt;Docker pull&lt;/code&gt; command
failed.  Our docker registry is running in docker container and
all the logs are in &lt;code&gt;docker logs&lt;/code&gt;, no persistence :-(.
Even worse there is absolutely no supervision of the service. I started to
extract the relevant logs from the docker daemon.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;docker logs &lt;span class="k"&gt;$(&lt;/span&gt;docker ps&lt;span class="p"&gt;|&lt;/span&gt;grep &lt;span class="s2"&gt;&amp;quot;registry:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt; tr -s &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; cut -f &lt;span class="m"&gt;1&lt;/span&gt; -d &lt;span class="s2"&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;grep &lt;span class="s2"&gt;&amp;quot;my-container&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;quot;1.0.1&amp;quot;&lt;/span&gt; &amp;gt; /tmp/logs.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;When looking at the logs, I found interesting patterns &lt;code&gt;filesystem.PutContent&lt;/code&gt;
and &lt;code&gt;filesystem.Delete&lt;/code&gt;. This patterns come from the docker storage driver.
Next step is to catch the deletion, this could be achieved by grepping
the HTTP DELETE message.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# egrep DELETE my-service-1.0.1.txt&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;2019-03-05T10:19:55.904910006Z&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;debug &lt;span class="nv"&gt;msg&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;filesystem.GetContent(\&amp;quot;/docker/registry/v2/repositories/corp/my-service/_manifests/tags/1.0.1/current/link\&amp;quot;)&amp;quot;&lt;/span&gt; go.version&lt;span class="o"&gt;=&lt;/span&gt;go1.7.6 http.request.host&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;corp-ssa-docker-registry:5000&amp;quot;&lt;/span&gt; http.request.id&lt;span class="o"&gt;=&lt;/span&gt;3313e9de-d9cf-4696-8b3b-7c09ca22904e http.request.method&lt;span class="o"&gt;=&lt;/span&gt;DELETE http.request.remoteaddr&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;10.0.0.2:56942&amp;quot;&lt;/span&gt; http.request.uri&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/v2/corp/my-service/manifests/sha256:640f61c7fa1bceda97c3105d20417695cd9ff29b32d4dada932bab950748c092&amp;quot;&lt;/span&gt; http.request.useragent&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;python-requests/2.4.3 CPython/3.4.2 Linux/3.10.0-514.el7.x86_64&amp;quot;&lt;/span&gt; instance.id&lt;span class="o"&gt;=&lt;/span&gt;8a995190-de4b-48a4-bbc7-0757bb249e2f &lt;span class="nv"&gt;service&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;registry trace.duration&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;.581796ms trace.file&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/go/src/github.com/docker/distribution/registry/storage/driver/base/base.go&amp;quot;&lt;/span&gt; trace.func&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;github.com/docker/distribution/registry/storage/driver/base.(*Base).GetContent&amp;quot;&lt;/span&gt; trace.id&lt;span class="o"&gt;=&lt;/span&gt;80e22948-8fd7-4f1e-8330-7da907ae5f30 trace.line&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;82&lt;/span&gt; vars.name&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;corp/my-service&amp;quot;&lt;/span&gt; vars.reference&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;sha256:640f61c7fa1bceda97c3105d20417695cd9ff29b32d4dada932bab950748c092&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;v2.6.2

&lt;span class="nv"&gt;time&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;2019-03-05T10:19:55.905819262Z&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;debug &lt;span class="nv"&gt;msg&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;filesystem.Delete(\&amp;quot;/docker/registry/v2/repositories/corp/my-service/_manifests/tags/1.0.1\&amp;quot;)&amp;quot;&lt;/span&gt; go.version&lt;span class="o"&gt;=&lt;/span&gt;go1.7.6 http.request.host&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;corp-ssa-docker-registry:5000&amp;quot;&lt;/span&gt; http.request.id&lt;span class="o"&gt;=&lt;/span&gt;3313e9de-d9cf-4696-8b3b-7c09ca22904e http.request.method&lt;span class="o"&gt;=&lt;/span&gt;DELETE http.request.remoteaddr&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;10.0.0.2:56942&amp;quot;&lt;/span&gt; http.request.uri&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/v2/corp/my-service/manifests/sha256:640f61c7fa1bceda97c3105d20417695cd9ff29b32d4dada932bab950748c092&amp;quot;&lt;/span&gt; http.request.useragent&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;python-requests/2.4.3 CPython/3.4.2 Linux/3.10.0-514.el7.x86_64&amp;quot;&lt;/span&gt; instance.id&lt;span class="o"&gt;=&lt;/span&gt;8a995190-de4b-48a4-bbc7-0757bb249e2f &lt;span class="nv"&gt;service&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;registry trace.duration&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;760&lt;/span&gt;.721s trace.file&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/go/src/github.com/docker/distribution/registry/storage/driver/base/base.go&amp;quot;&lt;/span&gt; trace.func&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;github.com/docker/distribution/registry/storage/driver/base.(*Base).Delete&amp;quot;&lt;/span&gt; trace.id&lt;span class="o"&gt;=&lt;/span&gt;d61e5938-5da2-4e85-bfd0-e26cc2c3fbab trace.line&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;177&lt;/span&gt; vars.name&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;corp/my-service&amp;quot;&lt;/span&gt; vars.reference&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;sha256:640f61c7fa1bceda97c3105d20417695cd9ff29b32d4dada932bab950748c092&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;v2.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Second line of the output tell the truth! The deletion has been done by
10.0.0.2 at 10:19 and it is probably a Python script because the user agent is
&lt;strong&gt;python-requests&lt;/strong&gt;. So do not be afraid of going inside docker registry logs,
forensic is possible. But I would
expect to find an easier solution with &lt;a href="https://github.com/kwk/docker-registry-frontend"&gt;docker
frontend&lt;/a&gt;.  Unfortunately this
project has not been updated since July 6th, 2017. It is written in
&lt;a href="https://en.wikipedia.org/wiki/AngularJS"&gt;AngularJS&lt;/a&gt;, it may be a problem to
find new contributor, because
&lt;a href="https://en.wikipedia.org/wiki/Angular_(web_framework)"&gt;Angular&lt;/a&gt; has been
rewritten with the version 2.x. I hope docker-registry-frontend will find a
honorable successor or at least new maintener.&lt;/p&gt;</content><category term="ci/cd"></category></entry><entry><title>Zabbix Agent on centos 7.3 (2/2)</title><link href="https://romainjacquet.github.io/zabbix-agent-on-centos-73-22.html" rel="alternate"></link><published>2019-03-11T19:00:00+01:00</published><updated>2019-03-11T19:00:00+01:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-03-11:/zabbix-agent-on-centos-73-22.html</id><summary type="html">&lt;p&gt;installing zabbix on CentOS 7.3 (2/2)&lt;/p&gt;</summary><content type="html">&lt;p&gt;I finished the previous post with a catastrophic situation: the VM didn't boot.
I read on the internet that adding "selinux=0" on the kernel command line could fix it.
Disabling SELinux from the kernel command line is interesting because SELinux is disabled
at the early beginning of the boot process. So event if you have a broken configuration of
SELinux, you can bypass it and boot.
Below is the official definition of the kernel argument:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;selinux&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;SELINUX&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;enable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SELinux&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;boot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;time&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="nf"&gt;Format&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;0&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="n"&gt;See&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;security&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;selinux&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Kconfig&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;text&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;disable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;enable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="k"&gt;Default&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;value&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;via&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kernel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;option&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="k"&gt;If&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;boot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;time&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;selinux&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;disable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;can&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;used&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="n"&gt;later&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;disable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;prior&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;initial&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;policy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;load&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I reboot the server and edit the command line to append "selinux=0".
I checked the content of /etc/selinux.config:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# This file controls the state of SELinux on the system.&lt;/span&gt;
&lt;span class="c1"&gt;# SELINUX= can take one of these three values:&lt;/span&gt;
&lt;span class="c1"&gt;#     enforcing - SELinux security policy is enforced.&lt;/span&gt;
&lt;span class="c1"&gt;#     permissive - SELinux prints warnings instead of enforcing.&lt;/span&gt;
&lt;span class="c1"&gt;#     disabled - No SELinux policy is loaded.&lt;/span&gt;
&lt;span class="n"&gt;SELINUX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;enforcing&lt;/span&gt;
&lt;span class="c1"&gt;# SELINUXTYPE= can take one of three two values:&lt;/span&gt;
&lt;span class="c1"&gt;#     targeted - Targeted processes are protected,&lt;/span&gt;
&lt;span class="c1"&gt;#     minimum - Modification of targeted policy. Only selected processes are protected.&lt;/span&gt;
&lt;span class="c1"&gt;#     mls - Multi Level Security protection.&lt;/span&gt;
&lt;span class="n"&gt;SELINUXTYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;disabled&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Damn it! SELINUXTYPE contains invalid value. This is the cause of the boot failure. After
replacing SELINUX=enforcing by SELINUX=disabled and SELINUXTYPE=disabled by SELINUXTYPE=targeted, boot is fine.&lt;/p&gt;
&lt;h2&gt;final note&lt;/h2&gt;
&lt;p&gt;A better solution is available to fix and respect SELinux:
&lt;a href="https://www.mangeek.com/2017/03/using-zabbix-3-2-with-centos-and-selinux/"&gt;Man geek Zabbix and SeLinux&lt;/a&gt;
It uses the python utils &lt;a href="https://github.com/SELinuxProject/selinux/tree/master/python/audit2allow"&gt;audit2allow&lt;/a&gt;
which is part of the SELinux project. Other people says that just upgrading the SELinux policy solved the problem
but I didn't take the risk.&lt;/p&gt;</content><category term="sysadmin"></category></entry><entry><title>Zabbix Agent on centos 7.3 (1/2)</title><link href="https://romainjacquet.github.io/zabbix-agent-on-centos-73-12.html" rel="alternate"></link><published>2019-03-08T16:00:00+01:00</published><updated>2019-03-08T16:00:00+01:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-03-08:/zabbix-agent-on-centos-73-12.html</id><summary type="html">&lt;p&gt;installing zabbix on CentOS 7.3&lt;/p&gt;</summary><content type="html">&lt;p&gt;I was working on a simple and unrisky admin task: connecting a server to our
monitoring system (&lt;a href="https://www.zabbix.com/"&gt;zabbix&lt;/a&gt;). A perfect no-brainer to
finish the week. The server is a CentOS 7.3 and has been installed in old-style
with no configuration management :-(. I grab  the last version of the Zabbix
agent on the Internet and install it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;wget https://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-agent-4.0.3-1.el7.x86_64.rpm
rpm -i zabbix-agent-4.0.3-1.el7.x86_64.rpm
systemctl daemon-reload
systemctl start zabbix-agent
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Things didn't go as expected. Zabbix agent was not running. I discover a mismatch between pid file declared in Zabbix configuration and the one .&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt; egrep pid /etc/zabbix/zabbix_agentd.conf
&lt;span class="c1"&gt;# PidFile=/tmp/zabbix_agentd.pid&lt;/span&gt;
&lt;span class="nv"&gt;PidFile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/var/run/zabbix/zabbix_agentd.pid
 egrep pid /usr/lib/systemd/system/zabbix-agent.service
&lt;span class="nv"&gt;PIDFile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/run/zabbix/zabbix_agentd.pid
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I fix it by customizing the systemd unit and set the correct path for the PID file.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cp /usr/lib/systemd/system/zabbix-agent.service /etc/systemd/system
sed -i s&lt;span class="p"&gt;|&lt;/span&gt;/run&lt;span class="p"&gt;|&lt;/span&gt;/var/run&lt;span class="p"&gt;|&lt;/span&gt; /etc/systemd/system/zabbix-agent.service
systemctl restart zabbix-agent
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Arg! It still do not work.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;journalctl -u zabbix-agent
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="m"&gt;24518&lt;/span&gt;:20190308:160332.924 using configuration file: /etc/zabbix/zabbix_agentd.conf
 &lt;span class="m"&gt;24518&lt;/span&gt;:20190308:160332.924 cannot &lt;span class="nb"&gt;set&lt;/span&gt; resource limit: &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;13&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; Permission denied
 &lt;span class="m"&gt;24518&lt;/span&gt;:20190308:160332.924 cannot disable core dump, exiting...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;What? Why Zabbix want disable the core dump. Are they so confident that the
software never crashed? :-) Anyway. I checked ulimit: fine. I finally found a
relevant entry in the SELinux log:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;AVC &lt;span class="nv"&gt;msg&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;audit&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1552057474&lt;/span&gt;.427:23308&lt;span class="o"&gt;)&lt;/span&gt;: avc:  denied  &lt;span class="o"&gt;{&lt;/span&gt; setrlimit &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt;  &lt;span class="nv"&gt;pid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;24560&lt;/span&gt; &lt;span class="nv"&gt;comm&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;zabbix_agentd&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;scontext&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;system_u:system_r:zabbix_agent_t:s0 &lt;span class="nv"&gt;tcontext&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;system_u:system_r:zabbix_agent_t:s0 &lt;span class="nv"&gt;tclass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;process
&lt;span class="nv"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;SYSCALL &lt;span class="nv"&gt;msg&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;audit&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1552057474&lt;/span&gt;.427:23308&lt;span class="o"&gt;)&lt;/span&gt;: &lt;span class="nv"&gt;arch&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;c000003e &lt;span class="nv"&gt;syscall&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;160&lt;/span&gt; &lt;span class="nv"&gt;success&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;no &lt;span class="nv"&gt;exit&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;-13 &lt;span class="nv"&gt;a0&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="nv"&gt;a1&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;7ffc3c5ff9b0 &lt;span class="nv"&gt;a2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;a3&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt; &lt;span class="nv"&gt;items&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;ppid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;24559&lt;/span&gt; &lt;span class="nv"&gt;pid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;24560&lt;/span&gt; &lt;span class="nv"&gt;auid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4294967295&lt;/span&gt; &lt;span class="nv"&gt;uid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;996&lt;/span&gt; &lt;span class="nv"&gt;gid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;992&lt;/span&gt; &lt;span class="nv"&gt;euid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;996&lt;/span&gt; &lt;span class="nv"&gt;suid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;996&lt;/span&gt; &lt;span class="nv"&gt;fsuid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;996&lt;/span&gt; &lt;span class="nv"&gt;egid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;992&lt;/span&gt; &lt;span class="nv"&gt;sgid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;992&lt;/span&gt; &lt;span class="nv"&gt;fsgid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;992&lt;/span&gt; &lt;span class="nv"&gt;tty&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;none&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="nv"&gt;ses&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4294967295&lt;/span&gt; &lt;span class="nv"&gt;comm&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;zabbix_agentd&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;exe&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/usr/sbin/zabbix_agentd&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;subj&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;system_u:system_r:zabbix_agent_t:s0 &lt;span class="nv"&gt;key&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;null&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;SELinux rules are not known as readable and user friendly. So I choose to
disabled SELinux. It is acceptable for an internal server. I edit the file in
/etc and reboot. It took a very long time that alert me that something goes
wrong. I went to the WMWare console and discovered the failure:
&lt;img alt="Alt Text" src="https://romainjacquet.github.io/images/SELinuxfailed.PNG"&gt;&lt;/p&gt;
&lt;p&gt;It was supposed to be a no-brainer, not a &lt;strong&gt;complete&lt;/strong&gt; failure! Solution at the next post.&lt;/p&gt;</content><category term="sysadmin"></category></entry><entry><title>Python low-level and ioctl</title><link href="https://romainjacquet.github.io/python-low-level-and-ioctl.html" rel="alternate"></link><published>2019-02-21T19:33:00+01:00</published><updated>2019-02-21T19:33:00+01:00</updated><author><name>Romain JACQUET</name></author><id>tag:romainjacquet.github.io,2019-02-21:/python-low-level-and-ioctl.html</id><summary type="html">&lt;p&gt;playing with ioctl in Python&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm using Python since 2006 and I still discovered gems inside. Yesterday I
need to read the DVB card status to find if the acquisition is fine. The status
is provided by the DVB driver which is a set a of kernel modules. The DVB Card
status could be read using the &lt;a href="https://www.linuxtv.org/docs/dvbapi/DVB_Frontend_API.html"&gt;DVB API&lt;/a&gt; of the kernel. Using old-style C and
&lt;a href="https://linux.die.net/man/2/ioctl"&gt;ioctl&lt;/a&gt; function , this could be achieved using this lines:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;fe_status_t&lt;/span&gt; &lt;span class="n"&gt;my_status&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ret&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ioctl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;FE_READ_STATUS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;my_status&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It works. But my software is written in Python and I don't want to write a
binding. C-binding is possible but painful compared of writing pure Python. How
to translate this code into Python? Official documentation talks about &lt;a href="https://docs.python.org/2/library/fcntl.html"&gt;fcntl
module&lt;/a&gt; but the description of the usage is not simple. I try this code in
Python:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# f previously open&lt;/span&gt;

&lt;span class="n"&gt;ret_status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;B&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;fcntl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ioctl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x69&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ret_status&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;My first attempt failed, resulting in an exception "Operation not permitted". Hum, wait a minute I remembered that ioctl system call is unique among all drivers. I looked more carefully the definition of FE_READ_STATUS in the kernel headers in the file ./include/linux/dvb/frontend.h .&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cp"&gt;#define FE_READ_STATUS                   _IOR(&amp;#39;o&amp;#39;, 69, fe_status_t)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;_IOR is a macro in the kernel to create unique IOCTL number. I didn't understand all the logic behind. Using a C program I successfully display the real number of the IOCTL FE_READ_STATUS.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;REAL VALUE %08x&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;FE_READ_STATUS&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And the final function to get status is now easy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;is_dvb_locked&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adapter_name&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adapter_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rw&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ret_status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;B&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;fcntl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ioctl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x80046f45&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ret_status&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ret_status&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;locked &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x10&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mh"&gt;0x10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;KeyError&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Unknown status &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Definitely Python is "batteries included" and even for low-level Python could do the job. See &lt;a href="https://www.python.org/dev/peps/pep-0206/"&gt;PEP 206&lt;/a&gt; for more information about "batteries included".&lt;/p&gt;</content><category term="development"></category></entry></feed>